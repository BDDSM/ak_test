
Функция КОРА_ПолучитьАдрес_19()
	Возврат "http://10.0.0.19/automacon18" + "/ws/MobileService?wsdl"	
КонецФункции

Функция ПолучитьПроксиПоАдресу(Пользователь, Пароль, СообщениеОбОшибке)	
	Адрес = КОРА_ПолучитьАдрес_19();
	
	Попытка			
		Определения = Новый WSОпределения(Адрес, Пользователь, Пароль);
		Прокси = Новый WSПрокси(Определения, "MobileExchange", "MobileService", "MobileServiceSoap");
		Прокси.Пользователь = Пользователь;
		Прокси.Пароль = Пароль;					
		
		Возврат Прокси;
	Исключение
		СообщениеОбОшибке = ОписаниеОшибки();
		
		Возврат Неопределено;
	КонецПопытки;	
КонецФункции 

// Возвращает прокси сервиса обмена данными.
//
// Возвращаемое значение:
// WSПрокси
//
Функция ПолучитьПрокси(СообщениеОбОшибке = "") Экспорт	
	Пользователь = "obmenMP";
	Пароль = "666";
	
	Возврат ПолучитьПроксиПоАдресу(Пользователь, Пароль, СообщениеОбОшибке);	
КонецФункции

&НаСервере
Процедура ТестНаСервере()
	Прокси = ПолучитьПрокси();
	Прокси.ПрофильГрузчика(Новый ХранилищеЗначения(""));
КонецПроцедуры

&НаКлиенте
Процедура Тест(Команда)
	ТестНаСервере();
КонецПроцедуры
