
//+++АК SHEP 2018.06.08 ИП-00018624
Функция СообщитьОНаличииБлокируемойНоменклатурыПоКраснымМаркерам(СписокНоменклатуры, Отказ = Ложь) Экспорт
	
	Запрос = Новый Запрос(
		"ВЫБРАТЬ
		|	ПРЕДСТАВЛЕНИЕ(БлокируемаяНоменклатураПоКраснымМаркерамСрезПоследних.Номенклатура) КАК НоменклатураПредставление,
		|	ПРЕДСТАВЛЕНИЕ(БлокируемаяНоменклатураПоКраснымМаркерамСрезПоследних.ХарактеристикаНоменклатуры) КАК ХарактеристикаНоменклатурыПредставление,
		|	БлокируемаяНоменклатураПоКраснымМаркерамСрезПоследних.Номенклатура,
		|	БлокируемаяНоменклатураПоКраснымМаркерамСрезПоследних.ХарактеристикаНоменклатуры
		|ИЗ
		|	РегистрСведений.БлокируемаяНоменклатураПоКраснымМаркерам.СрезПоследних(, Номенклатура В (&СписокНоменклатуры)) КАК БлокируемаяНоменклатураПоКраснымМаркерамСрезПоследних
		|ГДЕ
		|	БлокируемаяНоменклатураПоКраснымМаркерамСрезПоследних.БлокировкаРаспределенияТовара = ИСТИНА");
	Запрос.УстановитьПараметр("СписокНоменклатуры", СписокНоменклатуры);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если НЕ РезультатЗапроса.Пустой() Тогда
		Отказ = Истина;
		
		ВыборкаЗапроса = РезультатЗапроса.Выбрать();
		Пока ВыборкаЗапроса.Следующий() Цикл
			Сообщить("Распределение по продукту " + ВыборкаЗапроса.НоменклатураПредставление + " (" + ВыборкаЗапроса.ХарактеристикаНоменклатурыПредставление
			+ ") не может быть сделано, т.к. продукт заблокирован по причине наличия красных маркеров");
		КонецЦикла;
	КонецЕсли;
	
	Возврат Отказ;
	
КонецФункции
