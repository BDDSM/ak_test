Функция Дата1С_в_ДатаXML(Дата)
	Если ТипЗнч(Дата) = Тип("Строка") Тогда
		Возврат Дата;
	ИначеЕсли ТипЗнч(Дата) = Тип("Дата") Тогда
		Возврат Формат(Дата,"ДФ=yyyy-MM-dd");
	Иначе
		Возврат Неопределено;
	КонецЕсли;
КонецФункции

Функция Дата1С_в_ВремяXML(Дата)
	Возврат Формат(Дата,"ДФ=ЧЧ:мм:сс")+".000";
КонецФункции

Функция Дата1С_в_ДатаВремяXML(Дата)
	ДатаXML		= Дата1С_в_ДатаXML(Дата);
	если ДатаXML="" тогда
		возврат "";
	конецесли;
	ВремяXML	= Дата1С_в_ВремяXML(Дата);
	Возврат ДатаXML+"T"+ВремяXML+"Z";
КонецФункции

Процедура ОтменаНажатие(Элемент)
	этаформа.Закрыть("Отмена");
КонецПроцедуры
Процедура УдалитьНажатие(Элемент)
	если НЕ ЭлементыФормы.списокВрат.ТекущаяСтрока=неопределено тогда
		списокВрат.Удалить(ЭлементыФормы.списокВрат.ТекущаяСтрока);
	конецесли;
КонецПроцедуры

Процедура ДобавитьНажатие(Элемент)
	ДатаВремяПрибытия1С="";
	если ВвестиДату(ДатаВремяПрибытия1С,"Укажите дату и время прибытия",ЧастиДаты.ДатаВремя) тогда
		ДатаВремяПрибытия=Дата1С_в_ДатаВремяXML(ДатаВремяПрибытия1С);
		если не ДатаВремяПрибытия="" тогда
			списокВрат.Добавить(ДатаВремяПрибытия,ДатаВремяПрибытия1С);
			списокВрат[списокВрат.Количество()-1].пометка=Истина;
		конецесли;
	конецесли;
КонецПроцедуры

Процедура ОКНажатие(Элемент)
	если списокВрат.Количество()=0 тогда
		списокВрат.Добавить("","");
	конецесли;
	этаформа.Закрыть("Ок");
КонецПроцедуры
