<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7" />
    <title>test</title>
    <style>
        .helper,.img-container{vertical-align:middle;zoom:1}.canvas,.helper,.image,body,html{height:100%}.area,body,html{overflow:hidden}body,html,image{margin:0;padding:0}.canvas{width:100%;text-align:center}.img-container{position:relative;display:-moz-inline-box;display:inline-block;//display:inline}.area,.inner-image{position:absolute}.helper{display:-moz-inline-box;display:inline-block;width:0;//display:inline}.image{width:100%;opacity:.75;filter:alpha(opacity=75)}.area{border:0 solid #000}
    </style>
</head>
<body>
    <div class="canvas">
        <div class="img-container">
            <img class="image" src="" >
        </div>
        <div class="helper"></div>
    </div>
 
    <script>
        !function(){if(!document.querySelectorAll&&!document.querySelector){var t=document.createStyleSheet(),e=function(e,i){var r,n=document.all,o=n.length,a=[];for(t.addRule(e,"foo:bar"),r=0;o>r&&!("bar"===n[r].currentStyle.foo&&(a.push(n[r]),a.length>i));r+=1);return t.removeRule(0),a};document.querySelectorAll=function(t){return e(t,1/0)},document.querySelector=function(t){return e(t,1)[0]||null}}}(),function(){window.JSON||(window.JSON={parse:function(){"use strict";var t,e,i,r,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"   "},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},a=function(r){return r&&r!==e&&o("Expected '"+r+"' instead of '"+e+"'"),e=i.charAt(t),t+=1,e},c=function(){var t,i="";for("-"===e&&(i="-",a("-"));e>="0"&&"9">=e;)i+=e,a();if("."===e)for(i+=".";a()&&e>="0"&&"9">=e;)i+=e;if("e"===e||"E"===e)for(i+=e,a(),"-"!==e&&"+"!==e||(i+=e,a());e>="0"&&"9">=e;)i+=e,a();return t=+i,isFinite(t)?t:void o("Bad number")},l=function(){var t,i,r,c="";if('"'===e)for(;a();){if('"'===e)return a(),c;if("\\"===e)if(a(),"u"===e){for(r=0,i=0;4>i&&(t=parseInt(a(),16),isFinite(t));i+=1)r=16*r+t;c+=String.fromCharCode(r)}else{if("string"!=typeof n[e])break;c+=n[e]}else c+=e}o("Bad string")},u=function(){for(;e&&" ">=e;)a()},f=function(){switch(e){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+e+"'")},h=function(){var t=[];if("["===e){if(a("["),u(),"]"===e)return a("]"),t;for(;e;){if(t.push(r()),u(),"]"===e)return a("]"),t;a(","),u()}}o("Bad array")},g=function(){var t,i={};if("{"===e){if(a("{"),u(),"}"===e)return a("}"),i;for(;e;){if(t=l(),u(),a(":"),Object.hasOwnProperty.call(i,t)&&o("Duplicate key '"+t+"'"),i[t]=r(),u(),"}"===e)return a("}"),i;a(","),u()}}o("Bad object")};return r=function(){switch(u(),e){case"{":return g();case"[":return h();case'"':return l();case"-":return c();default:return e>="0"&&"9">=e?c():f()}},function(n,a){var c;return i=n,t=0,e=" ",c=r(),u(),e&&o("Syntax error"),"function"==typeof a?function l(t,e){var i,r,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r=l(n,i),void 0!==r?n[i]=r:delete n[i]);return a.call(t,e,n)}({"":c},""):c}}()})}(),function(){function t(t){g="string"==typeof t?JSON.parse(t):h(t);var i=new Image;i.src=g.img,i.complete?e(i):i.onload=function(){e(i)},window.onresize=function(){n(),l()}}function e(t){d.imgOrigWidth=t.width,d.imgOrigHeight=t.height,d.imgContainer=document.querySelector(".img-container"),document.body.style.background=g.bgColor,g.margin||(g.margin=0),d.imgContainer.style.margin=g.margin+"px",n(),i(),r(),o()}function i(){var t=document.querySelector(".image");t.src=g.img,g.opacity&&(t.style.opacity=g.opacity/100,t.style.filter="alpha(opacity="+g.opacity+")")}function r(){for(var t,e=0;e<g.areas.length;e++)t=g.areas[e],t.left&&t.top||(t.left=t.x,t.top=t.y),t.bWidth=t.bWidth?t.bWidth:0,t.bColor=t.bColor?t.bColor:"#000",t.width=t.width,t.height=t.height}function n(){d.width=document.documentElement.clientWidth-2*g.margin,d.height=document.documentElement.clientHeight-2*g.margin,d.imgOrigWidth<d.width&&d.imgOrigHeight<d.height?(d.ratio=1,d.imgContainer.style.width=d.imgOrigWidth+"px",d.imgContainer.style.height=d.imgOrigHeight+"px"):(d.width/d.height>=d.imgOrigWidth/d.imgOrigHeight?d.ratio=d.height/d.imgOrigHeight:d.ratio=d.width/d.imgOrigWidth,d.imgContainer.style.width=d.ratio*d.imgOrigWidth+"px",d.imgContainer.style.height=d.ratio*d.imgOrigHeight+"px")}function o(){for(var t=0;t<g.areas.length;t++)a(g.areas[t],t)}function a(t,e){var i=f('<div class="area" data-id="'+e+'"><img class="inner-image" src="'+g.img+'" ></div>')[0];d.imgContainer.appendChild(i),c(i,{left:t.left,top:t.top,width:t.width,height:t.height}),i.style.border=g.areas[e].bWidth+"px solid "+g.areas[e].bColor,i.style.margin=-g.areas[e].bWidth+"px 0 0 -"+g.areas[e].bWidth+"px";var r=i.children[0];c(r,{left:-t.left,top:-t.top}),r.style.width=d.imgContainer.style.width,r.style.height=d.imgContainer.style.height}function c(t,e){for(var i in e)t.style[i]=d.ratio*e[i]+"px"}function l(){var t,e=document.querySelectorAll(".area");for(t=0;t<e.length;t++){u(e[t],["left","top","width","height"]);var i=e[t].children[0];i.style.left="-"+e[t].style.left,i.style.top="-"+e[t].style.top,i.style.width=d.imgContainer.style.width,i.style.height=d.imgContainer.style.height}}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];t.style[r]=d.ratio*g.areas[t.getAttribute("data-id")][r]+"px"}}function f(t){var e=document.createElement("div");return e.innerHTML=t,e.children}function h(t){var e;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var i=0,r=t.length;r>i;i++)e[i]=h(t[i]);return e}if(t instanceof Object){e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=h(t[n]));return e}throw new Error("Unable to copy object! Its type isn't supported.")}var g,d={};window.ImageAreas=t}();
    </script>
    <script>
        ImageAreas(&Параметры);
    </script>
</body>
</html>