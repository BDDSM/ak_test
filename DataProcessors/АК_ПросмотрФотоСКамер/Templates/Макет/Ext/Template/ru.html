<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="__STYLE__"></link><meta name="GENERATOR" content="MSHTML 11.00.9600.18666"></meta></head><body>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;meta charset="utf-8"&gt;<br>    &lt;title&gt;test&lt;/title&gt;<br>    &lt;style&gt;<br>        .helper,.img-container{vertical-align:middle;zoom:1}.canvas,.helper,.image,body,html{height:100%}.area,body,html{overflow:hidden}body,html,image{margin:0;padding:0}.canvas{width:100%;text-align:center}.img-container{position:relative;display:-moz-inline-box;display:inline-block;//display:inline}.area,.inner-image{position:absolute}.helper{display:-moz-inline-box;display:inline-block;width:0;//display:inline}.image{width:100%;opacity:.75;filter:alpha(opacity=75)}.area{border:0 solid #000}<br>    &lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;div class="canvas"&gt;<br>        &lt;div class="img-container"&gt;<br>            &lt;img class="image" src="" &gt;<br>        &lt;/div&gt;<br>        &lt;div class="helper"&gt;&lt;/div&gt;<br>    &lt;/div&gt;<br> <br>    &lt;script&gt;<br>        !function(){if(!document.querySelectorAll&amp;&amp;!document.querySelector){var t=document.createStyleSheet(),e=function(e,i){var r,n=document.all,o=n.length,a=[];for(t.addRule(e,"foo:bar"),r=0;o&gt;r&amp;&amp;!("bar"===n[r].currentStyle.foo&amp;&amp;(a.push(n[r]),a.length&gt;i));r+=1);return t.removeRule(0),a};document.querySelectorAll=function(t){return e(t,1/0)},document.querySelector=function(t){return e(t,1)[0]||null}}}(),function(){window.JSON||(window.JSON={parse:function(){"use strict";var t,e,i,r,n={'"':'"',"<a href="file://\\&quot;:&quot;\\&quot;,&quot;/&quot;:&quot;/&quot;,b:&quot;\b&quot;,f:&quot;\f&quot;,n:&quot;\n&quot;,r:&quot;\r&quot;,t">\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t</a>:"   "},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},a=function(r){return r&amp;&amp;r!==e&amp;&amp;o("Expected '"+r+"' instead of '"+e+"'"),e=i.charAt(t),t+=1,e},c=function(){var t,i="";for("-"===e&amp;&amp;(i="-",a("-"));e&gt;="0"&amp;&amp;"9"&gt;=e;)i+=e,a();if("."===e)for(i+=".";a()&amp;&amp;e&gt;="0"&amp;&amp;"9"&gt;=e;)i+=e;if("e"===e||"E"===e)for(i+=e,a(),"-"!==e&amp;&amp;"+"!==e||(i+=e,a());e&gt;="0"&amp;&amp;"9"&gt;=e;)i+=e,a();return t=+i,isFinite(t)?t:void o("Bad number")},l=function(){var t,i,r,c="";if('"'===e)for(;a();){if('"'===e)return a(),c;if("<a href="file://\\&quot;===e)if(a(),&quot;u&quot;===e){for(r=0,i=0;4&gt;i&amp;&amp;(t=parseInt(a(),16),isFinite(t));i+=1)r=16*r+t;c+=String.fromCharCode(r)}else{if(&quot;string&quot;!=typeof">\\"===e)if(a(),"u"===e){for(r=0,i=0;4&gt;i&amp;&amp;(t=parseInt(a(),16),isFinite(t));i+=1)r=16*r+t;c+=String.fromCharCode(r)}else{if("string"!=typeof</a> n[e])break;c+=n[e]}else c+=e}o("Bad string")},u=function(){for(;e&amp;&amp;" "&gt;=e;)a()},f=function(){switch(e){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+e+"'")},h=function(){var t=[];if("["===e){if(a("["),u(),"]"===e)return a("]"),t;for(;e;){if(t.push(r()),u(),"]"===e)return a("]"),t;a(","),u()}}o("Bad array")},g=function(){var t,i={};if("{"===e){if(a("{"),u(),"}"===e)return a("}"),i;for(;e;){if(t=l(),u(),a(":"),Object.hasOwnProperty.call(i,t)&amp;&amp;o("Duplicate key '"+t+"'"),i[t]=r(),u(),"}"===e)return a("}"),i;a(","),u()}}o("Bad object")};return r=function(){switch(u(),e){case"{":return g();case"[":return h();case'"':return l();case"-":return c();default:return e&gt;="0"&amp;&amp;"9"&gt;=e?c():f()}},function(n,a){var c;return i=n,t=0,e=" ",c=r(),u(),e&amp;&amp;o("Syntax error"),"function"==typeof a?function l(t,e){var i,r,n=t[e];if(n&amp;&amp;"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;(r=l(n,i),void 0!==r?n[i]=r:delete n[i]);return a.call(t,e,n)}({"":c},""):c}}()})}(),function(){function t(t){g="string"==typeof t?JSON.parse(t):h(t);var i=new Image;i.src=g.img,i.complete?e(i):i.onload=function(){e(i)},window.onresize=function(){n(),l()}}function e(t){d.imgOrigWidth=t.width,d.imgOrigHeight=t.height,d.imgContainer=document.querySelector(".img-container"),document.body.style.background=g.bgColor,g.margin||(g.margin=0),d.imgContainer.style.margin=g.margin+"px",n(),i(),r(),o()}function i(){var t=document.querySelector(".image");t.src=g.img,g.opacity&amp;&amp;(t.style.opacity=g.opacity/100,t.style.filter="alpha(opacity="+g.opacity+")")}function r(){for(var t,e=0;e&lt;g.areas.length;e++)t=g.areas[e],t.left&amp;&amp;t.top||(t.left=t.x,t.top=t.y),t.bWidth=t.bWidth?t.bWidth:0,t.bColor=t.bColor?t.bColor:"#000",t.width=t.width,t.height=t.height}function n(){d.width=document.documentElement.clientWidth-2*g.margin,d.height=document.documentElement.clientHeight-2*g.margin,d.imgOrigWidth&lt;d.width&amp;&amp;d.imgOrigHeight&lt;d.height?(d.ratio=1,d.imgContainer.style.width=d.imgOrigWidth+"px",d.imgContainer.style.height=d.imgOrigHeight+"px"):(d.width/d.height&gt;=d.imgOrigWidth/d.imgOrigHeight?d.ratio=d.height/d.imgOrigHeight:d.ratio=d.width/d.imgOrigWidth,d.imgContainer.style.width=d.ratio*d.imgOrigWidth+"px",d.imgContainer.style.height=d.ratio*d.imgOrigHeight+"px")}function o(){for(var t=0;t&lt;g.areas.length;t++)a(g.areas[t],t)}function a(t,e){var i=f('&lt;div class="area" data-id="'+e+'"&gt;&lt;img class="inner-image" src="'+g.img+'" &gt;&lt;/div&gt;')[0];d.imgContainer.appendChild(i),c(i,{left:t.left,top:t.top,width:t.width,height:t.height}),i.style.border=g.areas[e].bWidth+"px solid "+g.areas[e].bColor,i.style.margin=-g.areas[e].bWidth+"px 0 0 -"+g.areas[e].bWidth+"px";var r=i.children[0];c(r,{left:-t.left,top:-t.top}),r.style.width=d.imgContainer.style.width,r.style.height=d.imgContainer.style.height}function c(t,e){for(var i in e)t.style[i]=d.ratio*e[i]+"px"}function l(){var t,e=document.querySelectorAll(".area");for(t=0;t&lt;e.length;t++){u(e[t],["left","top","width","height"]);var i=e[t].children[0];i.style.left="-"+e[t].style.left,i.style.top="-"+e[t].style.top,i.style.width=d.imgContainer.style.width,i.style.height=d.imgContainer.style.height}}function u(t,e){for(var i=0;i&lt;e.length;i++){var r=e[i];t.style[r]=d.ratio*g.areas[t.getAttribute("data-id")][r]+"px"}}function f(t){var e=document.createElement("div");return e.innerHTML=t,e.children}function h(t){var e;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var i=0,r=t.length;r&gt;i;i++)e[i]=h(t[i]);return e}if(t instanceof Object){e={};for(var n in t)t.hasOwnProperty(n)&amp;&amp;(e[n]=h(t[n]));return e}throw new Error("Unable to copy object! Its type isn't supported.")}var g,d={};window.ImageAreas=t}();<br>    &lt;/script&gt;<br>    &lt;script&gt;<br>        ImageAreas(&amp;Параметры);<br>    &lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</body></html>