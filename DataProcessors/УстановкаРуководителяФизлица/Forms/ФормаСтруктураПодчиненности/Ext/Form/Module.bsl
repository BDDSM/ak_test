
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ПоказатьРезультатСтруктурыПодчиненностиСервер(Параметры);

КонецПроцедуры

&НаСервере
Процедура ПоказатьРезультатСтруктурыПодчиненностиСервер(Параметры)
	  
	СхемаКомпоновкиДанных = Документы.ИзменениеЗакупочныхЦен.ПолучитьМакет("УдаитьСтруктураПодчиненности");
	
	//Установка отборов
	Если Параметры.Свойство("Руководитель")
		И ЗначениеЗаполнено(Параметры.Руководитель) Тогда
		
		ЭлементОтбора = СхемаКомпоновкиДанных.НастройкиПоУмолчанию.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
		
		ЭлементОтбора.ЛевоеЗначение  = Новый ПолеКомпоновкиДанных("Руководитель");
		ЭлементОтбора.ВидСравнения   = ВидСравненияКомпоновкиДанных.Равно;
		ЭлементОтбора.ПравоеЗначение = Параметры.Руководитель;
		ЭлементОтбора.Использование  = Истина;
		
	КонецЕсли;
	
		
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	МакетКомпоновки   = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, СхемаКомпоновкиДанных.НастройкиПоУмолчанию,,,Тип("ГенераторМакетаКомпоновкиДанных")); 
	

	ПроцессорКомпоновкиДанных = Новый ПроцессорКомпоновкиДанных; 
	ПроцессорКомпоновкиДанных.Инициализировать(МакетКомпоновки); 
	
	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент; 
	Результат = ПроцессорВывода.Вывести(ПроцессорКомпоновкиДанных);
	
КонецПроцедуры

