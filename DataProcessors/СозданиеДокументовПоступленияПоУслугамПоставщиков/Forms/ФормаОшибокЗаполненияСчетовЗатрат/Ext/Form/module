
Процедура ОшибкиВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	
	Форма = ВыбраннаяСтрока.ДоговорКонтрагента.ПолучитьФорму();
	Форма.ОткрытьМодально();
	ЭлементыФормы.Ошибки.ОбновитьСтроки();
	
КонецПроцедуры

Процедура ОшибкиПриПолученииДанных(Элемент, ОформленияСтрок)
	
	МассивДоговоров = Новый Массив;
	Для Каждого ОформлениеСтроки Из ОформленияСтрок Цикл
		
		ТекущийДоговор = ОформлениеСтроки.ДанныеСтроки.ДоговорКонтрагента;
		Если МассивДоговоров.Найти(ТекущийДоговор) = Неопределено Тогда
			МассивДоговоров.Добавить(ТекущийДоговор);
		КонецЕсли;
		
	КонецЦикла;
	
	Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	ДоговорыКонтрагентов.Ссылка КАК ДоговорКонтрагента,
	|	ДоговорыКонтрагентов.СчетЗатрат,
	|	ДоговорыКонтрагентов.Субконто1,
	|	ДоговорыКонтрагентов.Субконто2,
	|	ДоговорыКонтрагентов.Субконто3
	|ИЗ
	|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
	|ГДЕ
	|	ДоговорыКонтрагентов.Ссылка В(&МассивДоговоров)");
	
	Запрос.УстановитьПараметр("МассивДоговоров", МассивДоговоров);
	ТаблицаДанных = Запрос.Выполнить().Выгрузить();
	
	Для Каждого ОформлениеСтроки Из ОформленияСтрок Цикл
		
		ДанныеСтроки = ОформлениеСтроки.ДанныеСтроки;
		НайденныеСтроки = ТаблицаДанных.НайтиСтроки(Новый Структура("ДоговорКонтрагента", ДанныеСтроки.ДоговорКонтрагента));
		Если НайденныеСтроки.Количество()Тогда
			ОформлениеСтроки.Ячейки.СчетЗатрат.УстановитьТекст(Строка(НайденныеСтроки[0].СчетЗатрат));
			ОформлениеСтроки.Ячейки.Субконто1.УстановитьТекст(Строка(НайденныеСтроки[0].Субконто1));
			ОформлениеСтроки.Ячейки.Субконто2.УстановитьТекст(Строка(НайденныеСтроки[0].Субконто2));
			ОформлениеСтроки.Ячейки.Субконто3.УстановитьТекст(Строка(НайденныеСтроки[0].Субконто3));
		Иначе
			ОформлениеСтроки.Ячейки.СчетЗатрат.УстановитьТекст("");
			ОформлениеСтроки.Ячейки.Субконто1.УстановитьТекст("");
			ОформлениеСтроки.Ячейки.Субконто2.УстановитьТекст("");
			ОформлениеСтроки.Ячейки.Субконто3.УстановитьТекст("");
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры
