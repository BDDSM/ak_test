
&НаКлиенте
Процедура ИзменитьСоставСтатей(Команда)
	ОткрытьПодборСтатей();
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьПодборСтатей()
	//СписокСтатей = Новый Массив;
	//
	//Для каждого ЭлКоллекции Из СтатьиВида Цикл
	//	СписокСтатей.Добавить(ЭлКоллекции.Свойство("Наименование"));
	//КонецЦикла; 
	
	СтруктураПараметров = Новый Структура;
	//СтруктураПараметров.Вставить("СписокСтатей",СписокСтатей);
	СтруктураПараметров.Вставить("ВидРасходаДС",ЭтаФорма.ТекущийЭлемент.ТекущиеДанные.Ссылка);
	СтруктураПараметров.Вставить("ЗаголовокФормы", "Редактирование статей: " + ЭтаФорма.ТекущийЭлемент.ТекущиеДанные.Ссылка);
	
	Результат = ОткрытьФормуМодально("ОбщаяФорма.ПодборСтатейДДСУправляемая", СтруктураПараметров);
	Если Результат = Неопределено Тогда
		Возврат;
	КонецЕсли;
	СтатьиВида.Очистить();
	Для каждого ЭлКоллекции Из Результат Цикл
		НоваяСтатья = СтатьиВида.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтатья, ЭлКоллекции);
	КонецЦикла;
	
	
КонецПроцедуры //

&НаКлиенте
Процедура СписокПриАктивизацииСтроки(Элемент)
	Результат = ПолучитьСтатьиВида(ЭтаФорма.ТекущийЭлемент.ТекущиеДанные.Ссылка);
	СтатьиВида.Очистить();
	Для каждого ЭлКоллекции Из Результат Цикл
		НоваяСтатья = СтатьиВида.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтатья, ЭлКоллекции);
	КонецЦикла;
КонецПроцедуры

&НаСервере
Функция ПолучитьСтатьиВида(ВидРасходаДС)
	Запрос = Новый Запрос;
	Запрос.Текст =  "ВЫБРАТЬ
	                |	СправочникСтатьиДвиженияДенежныхСредств.Ссылка КАК Статья
	                |ИЗ
	                |	Справочник.СтатьиДвиженияДенежныхСредств КАК СправочникСтатьиДвиженияДенежныхСредств
	                |		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеВидовРасходаИСтатейДС КАК СоответствиеВидовРасходаИСтатейДС
	                |		ПО СправочникСтатьиДвиженияДенежныхСредств.Ссылка = СоответствиеВидовРасходаИСтатейДС.СтатьяДС
	                |			И (СоответствиеВидовРасходаИСтатейДС.ВидРасходаДС = &ВидРасходаДС)" ;
	Запрос.УстановитьПараметр("ВидРасходаДС",ВидРасходаДС);
	Результат = Запрос.Выполнить().Выгрузить();
	Возврат Результат;
КонецФункции	