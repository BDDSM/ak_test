
&НаКлиенте
Процедура КомандаЗакрытьФорму(Команда)
	ЭтаФорма.Модифицированность = ЛОжь;
	ЭтаФорма.Закрыть();
КонецПроцедуры

&НаКлиенте
Процедура КомандаПрименить(Команда)
	ЭтаФорма.Модифицированность = ЛОжь;
	ЭтаФорма.Закрыть(Истина);
КонецПроцедуры

&НаКлиенте
Процедура СтатусПриИзменении(Элемент)
	СтатусПриИзмененииНаСервере();
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если ТипЗнч(Параметры.ПараметрЗапись) = Тип("Структура") Тогда
		ЗаполнитьЗначенияСвойств(Запись,Параметры.ПараметрЗапись);
	КонецЕСли;
	
	ИзменитьВидомостьДоступность();
КонецПроцедуры

Процедура СтатусПриИзмененииНаСервере()
	Запись.ОтправлятьПоПочтеКлиенту = Ложь;
	Запись.СинхронизироватьССайтом = Ложь;
	Запись.ОтправленПоПочтеКлиенту = Ложь;
	Запись.СинхронизированССайтом = Ложь;
	
	Запись.ОтправлятьПоПочтеКлиенту = Запись.Статус.ОтправлятьПоПочтеПоУмолчанию;
	Запись.СинхронизироватьССайтом = Запись.Статус.СинхронизироватьССайтомПоУмолчанию;
КонецПроцедуры

Процедура ИзменитьВидомостьДоступность()
	Элементы.СинхронизироватьССайтом.Доступность = Не Запись.СинхронизированССайтом;
	Элементы.ОтправлятьПоПочтеКлиенту.Доступность = Не Запись.ОтправленПоПочтеКлиенту;
	
	Элементы.НадписьСинхронизированССайтом.Заголовок = ФОрмат(Запись.СинхронизированССайтом,"БЛ=; БИ=СИНХРОНИЗИРОВАН");
	Элементы.НадписьОтправленПоПочте.Заголовок = ФОрмат(Запись.ОтправленПоПочтеКлиенту,"БЛ=; БИ=ОТПРАВЛЕН");
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	ЭтаФорма.Модифицированность = Ложь;
КонецПроцедуры
