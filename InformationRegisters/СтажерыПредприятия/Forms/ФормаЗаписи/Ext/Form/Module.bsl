
&НаСервере
Процедура ПриЗаписиНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	Если Запись.Стажер = Запись.Наставник Тогда
		Сообщение = Новый СообщениеПользователю();
		Сообщение.Текст = "Стажер не может быть наставником сам себе";
		Сообщение.Сообщить();
		Отказ = Истина;
	КонецЕсли;
	Если Запись.КонецСтажировки < Запись.НачалоСтажировки Тогда
		Сообщение = Новый СообщениеПользователю();
		Сообщение.Текст = "Начало стажировки не может быть позже окончания";
		Сообщение.Сообщить();
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Не РольДоступна("ПолныеПрава") Тогда
		Если Запись.Менеджер <> ПараметрыСеанса.ТекущийПользователь Тогда
			ЭтаФорма.ТолькоПросмотр = Истина;
			Сообщение = Новый СообщениеПользователю();
			Сообщение.Текст = "Редактирование записи других менеджеров запрещено, обратитесь к администратору";
			Сообщение.Сообщить();
		КонецЕсли;	
	КонецЕсли;	
	Если Запись.КонецСтажировки <= ТекущаяДата() Тогда
		ЭтаФорма.ТолькоПросмотр = Истина;
		Сообщение = Новый СообщениеПользователю();
		Сообщение.Текст = "Редактирование записи запрещено, по ней уже было начисление";
		Сообщение.Сообщить();
	КонецЕсли;	
	Если ЗначениеЗаполнено(Параметры.ЗначениеКопирования) Тогда
		Запись.Менеджер = Неопределено;
		Запись.Результат = 0;
	КонецЕсли;	
	
	Если Не ЗначениеЗаполнено(Запись.Менеджер) Тогда
		Запись.Менеджер = ПараметрыСеанса.ТекущийПользователь;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	//Вставить содержимое обработчика
КонецПроцедуры
