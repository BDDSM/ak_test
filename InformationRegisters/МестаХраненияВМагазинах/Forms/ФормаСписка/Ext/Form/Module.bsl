
Функция ВозможноУдалениеЗаписей()
	
	Возврат РольДоступна("ПолныеПрава");
	
КонецФункции

Процедура ГрупповоеДобавлениеСервер()
	
	Если ЗначениеЗаполнено(Адрес) Тогда
	    СтруктураВозврат = ПолучитьИзВременногоХранилища(Адрес);
		Для Каждого ЭлементМагазин Из СтруктураВозврат.Магазины Цикл
			Для Каждого ЭлементГруппа Из СтруктураВозврат.Группы Цикл
				Запись = РегистрыСведений.МестаХраненияВМагазинах.СоздатьМенеджерЗаписи();
				Запись.Магазин 			= ЭлементМагазин;
				Запись.МестоВыкладки 	= ЭлементГруппа;
				Запись.Хватает 			= Истина;
				Запись.Записать();
			КонецЦикла;	
		КонецЦикла;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ГрупповоеДобавление(Команда)
	
	СтруктураВозврат = ОткрытьФормуМодально("РегистрСведений.МестаХраненияВМагазинах.Форма.ФормаГрупповоеДобавление");
	Если ТипЗнч(СтруктураВозврат) = Тип("Структура") Тогда
		Адрес = ПоместитьВоВременноеХранилище(СтруктураВозврат, Новый УникальныйИдентификатор);
		ГрупповоеДобавлениеСервер();
		Элементы.Список.Обновить();
	КонецЕсли;	
	
КонецПроцедуры


&НаКлиенте
Процедура СписокПередУдалением(Элемент, Отказ)
	
	Отказ = НЕ ВозможноУдалениеЗаписей();
	Если Отказ Тогда
		Сообщить("Нет прав на удаление записей!");
	КонецЕсли;
	
КонецПроцедуры
