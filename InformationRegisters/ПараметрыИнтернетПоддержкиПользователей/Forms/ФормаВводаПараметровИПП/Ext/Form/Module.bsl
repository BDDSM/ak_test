
&НаКлиенте
Процедура СохранитьПараметры(Команда)
	
	Если Не ПроверитьЗаполнение()Тогда
		Возврат;
	КонецЕсли;
	
	СохранитьПараметрыНаСервере();
	
	Оповестить("ВводПараметровАутентификации");
	
КонецПроцедуры

&НаСервере
Процедура СохранитьПараметрыНаСервере()
	
	// Всегда только login и password, поэтому без отборов
	НЗ = РегистрыСведений.ПараметрыИнтернетПоддержкиПользователей.СоздатьНаборЗаписей();
	
	// Логин
	Запись = НЗ.Добавить();
	Запись.Имя = "login";
	Запись.Значение = Логин;
	
	// Пароль
	Запись = НЗ.Добавить();
	Запись.Имя = "password";
	Запись.Значение = Пароль;
	
	НЗ.Записать();
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Получим текущие параметры
	ДанныеАутентификации = РегистрыСведений.ПараметрыИнтернетПоддержкиПользователей.ДанныеАутентификацииПользователяИнтернетПоддержки();
	Если ДанныеАутентификации <> Неопределено Тогда
		Логин = ДанныеАутентификации.Логин;
		Пароль= ДанныеАутентификации.Пароль;
	КонецЕсли;
	
КонецПроцедуры
