
Процедура РегистрСведенийСписокПередУдалением(Элемент, Отказ)
	
	Предупреждение("Записи можно удалить только нажатием кнопки ""Удалить запись""!");
	Отказ = Истина;
	
КонецПроцедуры

Процедура ДействияФормыУдалитьЗапись(Кнопка)
	
	ТекСтр = ЭлементыФормы.РегистрСведенийСписок.ТекущаяСтрока;
	
	Если ТекСтр = Неопределено Тогда
		Предупреждение("Необходимо выделить строку таблицы!");
		Возврат;
	КонецЕсли;
	
	УзелОбмена = ОбщегоНазначенияПовтИсп.ПолучитьУзелОбменаПоКоду("БП");
	УзелОбмена2 = ОбщегоНазначенияПовтИсп.ПолучитьУзелОбменаПоКоду("БП2");
	
	ПланыОбмена.УдалитьРегистрациюИзменений(УзелОбмена, ТекСтр.Документ);
	ПланыОбмена.УдалитьРегистрациюИзменений(УзелОбмена2, ТекСтр.Документ);
	
	НаборЗаписей = РегистрыСведений.ЛогНеудачногоОбмена.СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Документ.Установить(ТекСтр.Документ);
	НаборЗаписей.Прочитать();
	НаборЗаписей.Очистить();
	НаборЗаписей.Записать(Истина);
	
КонецПроцедуры
