
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ТелефонныйНомер1 = Параметры.ТелефонныйНомер1;
	ТелефонныйНомер2 = Параметры.ТелефонныйНомер2;
	Для Каждого ЭлементМассива Из Параметры.МассивТТ Цикл
		СтрокаДоб = ДублиВДругихТТ.Добавить();
		СтрокаДоб.ТТ = ЭлементМассива;
		СтрокаДоб.ТелефонныйНомер1 = ЭлементМассива.ТелефонныйНомер1;
		СтрокаДоб.ТелефонныйНомер2 = ЭлементМассива.ТелефонныйНомер2;
	КонецЦикла;	
	
КонецПроцедуры

&НаСервере
Процедура ЗаписатьДругиеТТ()
	
	Для Каждого СтрокаТТ Из ДублиВДругихТТ Цикл
		СпрОбъект = СтрокаТТ.ТТ.ПолучитьОбъект();
		Если СпрОбъект.ТелефонныйНомер1 = ТелефонныйНомер1
			ИЛИ СпрОбъект.ТелефонныйНомер1 = ТелефонныйНомер2 Тогда
			СпрОбъект.ТелефонныйНомер1 = "";
		КонецЕсли;
		Если СпрОбъект.ТелефонныйНомер2 = ТелефонныйНомер1
			ИЛИ СпрОбъект.ТелефонныйНомер2 = ТелефонныйНомер2 Тогда
			СпрОбъект.ТелефонныйНомер2 = "";
		КонецЕсли;
		СпрОбъект.Записать();
	КонецЦикла;	
	
КонецПроцедуры	

&НаКлиенте
Процедура ОтвязатьТелефонОтДругихТТИЗакрыть(Команда)
	
	ЗаписатьДругиеТТ();
	Закрыть(Истина);
	
КонецПроцедуры
