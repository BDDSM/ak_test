
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Элементы.СтруктурнаяЕдиница.ТолькоПросмотр = НЕ Объект.Ссылка.Пустая();
	Элементы.НомерРабочегоМеста.ТолькоПросмотр = НЕ Объект.Ссылка.Пустая();
	
	ЭлементОтбора = Привязки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	ЭлементОтбора.ЛевоеЗначение    = Новый ПолеКомпоновкиДанных("РабочееМесто");
	ЭлементОтбора.ВидСравнения     = ВидСравненияКомпоновкиДанных.Равно;
	ЭлементОтбора.Использование    = Истина;
	ЭлементОтбора.ПравоеЗначение   = Объект.Ссылка;
	ЭлементОтбора.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
	
КонецПроцедуры

&НаКлиенте
Процедура ПривязкиПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	
	Если Объект.Ссылка.Пустая() Тогда
		Отказ = Истина;
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю("Нельзя добавлять данные пока элемент не записан");
	КонецЕсли;	
	
КонецПроцедуры

&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	
	Привязки.Отбор.Элементы.Очистить();
	
	ЭлементОтбора = Привязки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	ЭлементОтбора.ЛевоеЗначение    = Новый ПолеКомпоновкиДанных("РабочееМесто");
	ЭлементОтбора.ВидСравнения     = ВидСравненияКомпоновкиДанных.Равно;
	ЭлементОтбора.Использование    = Истина;
	ЭлементОтбора.ПравоеЗначение   = Объект.Ссылка;
	ЭлементОтбора.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
	
	Элементы.Привязки.Обновить();
	
КонецПроцедуры

//+++АК Susk (Суслин К.В.) 2017.12.15 ИП-00017497
&НаКлиенте
Процедура ВыгрузитьВБУ(Команда)
	
	Если Модифицированность Тогда
		Ответ = Вопрос("Перед продолжением необходимо записать элемент. Выполнить это сейчас?", РежимДиалогаВопрос.ДаНет);
		
		Если Ответ = КодВозвратаДиалога.Нет Тогда
			Возврат;
		КонецЕсли;
		
		Записать();
	КонецЕсли;
	
	ВыгрузитьВБухгалтериюСервер();
	
КонецПроцедуры

//+++АК Susk (Суслин К.В.) 2017.12.15 ИП-00017497
&НаСервере
Процедура ВыгрузитьВБухгалтериюСервер()
	
	ОбменСБП2_0.ВыгрузкаСправочникаВБП("Справочники", "РабочиеМеста", "Справочник_РабочиеМеста", Объект.Ссылка);

КонецПроцедуры
