
Процедура ОсновныеДействияФормыПечатьШК(Кнопка)
	
	ТабДок = Новый ТабличныйДокумент();
	ВнешняяКомпонента = Справочники.Номенклатура.ПодключитьВнешнююКомпонентуПечатиШтрихкода();
	Макет = Справочники.Склады.ПолучитьМакет("Этикетка");
	
	ШтрихКод = "810" + Прав("000000000000" + Формат(ИД, "ЧГ=0"), 12);
	Область = Макет.ПолучитьОбласть("Этикетка");
	Область.Параметры.Склад = Наименование;
	
	Рисунок 					= Область.Рисунки["ШтрихКод"];
	
	ПараметрыШК = Новый Структура();
	ПараметрыШК.Вставить("Ширина", Рисунок.Ширина);
	ПараметрыШК.Вставить("Высота", Рисунок.Высота);
	ПараметрыШК.Вставить("ТипКода", 4);
	ПараметрыШК.Вставить("ОтображатьТекст", Ложь);
	ПараметрыШК.Вставить("РазмерШрифта", 10);
	ПараметрыШК.Вставить("Штрихкод", Штрихкод);
	Рисунок.Картинка = ОбщегоНазначенияКлиентСервер.ПолучитьКартинкуШтрихкода(ВнешняяКомпонента, ПараметрыШК);
	Область.Параметры.ШК = ШтрихКод;
	ТабДок.Вывести(Область);
	
	ТабДок.КлючПараметровПечати = "ПараметрыПечати_ЭтикеткиУпаковки";
	ТабДок.Показать();
	
КонецПроцедуры

Процедура ЗаблокироватьДвижениеПоСкладуПриИзменении(Элемент)
	ЭлементыФормы.ДатаБлокировкиДвижений.Видимость = ЗаблокироватьДвижениеПоСкладу;
	ДатаБлокировкиДвижений = ?(ЗаблокироватьДвижениеПоСкладу, ДатаБлокировкиДвижений, Дата(1, 1, 1));
КонецПроцедуры

Процедура ПриОткрытии()
	ЭлементыФормы.ЗаблокироватьДвижениеПоСкладу.Доступность = УправлениеДопПравамиПользователей.ПолучитьПравоПользователяУпр(ПланыВидовХарактеристик.ПраваПользователей.БлокировкаПериодовПоСкладам, Ложь);
	ЭлементыФормы.ДатаБлокировкиДвижений.Видимость = ЗаблокироватьДвижениеПоСкладу;
	//+++AK BATG 2018.12.06 Разрешить устанавливать владельца и организацию только при создании нового элемента
	Если ЭтоНовый() Тогда
		ЭлементыФормы.Владелец.ТолькоПросмотр = Ложь;
		ЭлементыФормы.Организация.ТолькоПросмотр = Ложь;
	Иначе
		ЭлементыФормы.Владелец.ТолькоПросмотр = Истина;
		ЭлементыФормы.Организация.ТолькоПросмотр = Истина;
	КонецЕсли; 
	//---AK BATG 	
КонецПроцедуры
