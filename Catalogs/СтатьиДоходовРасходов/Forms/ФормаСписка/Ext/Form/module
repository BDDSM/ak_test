
Процедура СправочникСписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, ЭтоГруппа)
	Если НЕ Элемент.ИерархическийПРосмотр Тогда
		Отказ = Истина;
		Предупреждение("Создание новых групп и элементов возможно только в режиме просмотра иерархии");
	Иначе	
		Если Элемент.ТекущийРодитель.Пустая() Тогда
			Уровень = 0;
		Иначе
			Уровень = Элемент.ТекущийРодитель.Ссылка.Уровень()+1;
		КонецЕсли;
		
		Если ЭтоГруппа И Уровень > 1 Тогда
			Отказ = Истина;
			Предупреждение("Создание групп на этом уровне не предусмотрено");
		ИначеЕсли НЕ ЭтоГруппа И НЕ Уровень = 2 Тогда
			Отказ = Истина;
			Предупреждение("Создание элементов на этом уровне не предусмотрено");
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры
//
//
Процедура ДействияФормыРедактироватьКод(Кнопка)
	МеханизмНумерацииОбъектов.ИзменениеВозможностиРедактированияНомера(Метаданные.Справочники.СтатьиДоходовРасходов, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);
КонецПроцедуры
//
//
Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	МеханизмНумерацииОбъектов.ДобавитьВМенюДействияКнопкуРедактированияКода(ЭлементыФормы.ДействияФормы.Кнопки.Подменю);
	МеханизмНумерацииОбъектов.УстановитьДоступностьПоляВводаНомера(Метаданные.Справочники.СтатьиДоходовРасходов, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);
КонецПроцедуры

Процедура ПриОткрытии()
	СправочникДерево.Порядок.Установить("Код");
КонецПроцедуры

Процедура ДействияФормыИсторияИзменений(Кнопка)
	ИсторияИзменений = Отчеты.ИсторияИзмененийОбъектов.Создать();
	ИсторияИзменений.СсылкаНаОбъект = ЭлементыФормы.СправочникСписок.ТекущиеДанные;
	Форма = ИсторияИзменений.ПолучитьФорму("ФормаОтчета");
	Форма.СформироватьТаблицуВерсий();
	Форма.Открыть();
КонецПроцедуры
