
//Стандартная процедура модуля менеджера для заполнения ДанныхВыбора
//
Процедура ОбработкаПолученияДанныхВыбора(ДанныеВыбора, Параметры, СтандартнаяОбработка)
	
	//Получение данных выбора 
	
	Если Параметры.Свойство("ДополнительныеПараметры") Тогда
		
		СтандартнаяОбработка = Ложь;
		
		ДанныеВыбора = Новый СписокЗначений;
		
		Если Параметры.ДополнительныеПараметры = "ПодборПоДолжности" Тогда
			
			Запрос = Новый Запрос;
			
			Запрос.Текст = "ВЫБРАТЬ РАЗРЕШЕННЫЕ
			|	ФизическиеЛица.Должность КАК Значение,
			|	ФизическиеЛица.Должность КАК Представление
			|ИЗ
			|	Справочник.СотрудникиОрганизаций КАК СотрудникиОрганизаций
			|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ФизическиеЛица КАК ФизическиеЛица
			|		ПО СотрудникиОрганизаций.Физлицо = ФизическиеЛица.Ссылка
			|			И (ФизическиеЛица.Должность ПОДОБНО &Наименование)
			|ГДЕ
			|	СотрудникиОрганизаций.ДатаУвольнения = &ПустаяДата
			|	И НЕ СотрудникиОрганизаций.ПометкаУдаления
			|	И ФизическиеЛица.Активный
			|
			|СГРУППИРОВАТЬ ПО
			|	ФизическиеЛица.Должность,
			|	ФизическиеЛица.Должность
			|
			|УПОРЯДОЧИТЬ ПО
			|	ФизическиеЛица.Должность";
			
			Запрос.УстановитьПараметр("ПустаяДата", Дата(1,1,1));
			Запрос.УстановитьПараметр("Наименование", "%" + Параметры.ТекстПоиска + "%");
			
			Результат = Запрос.Выполнить();
			
			Если НЕ Результат.Пустой() Тогда
				
				Выборка = Результат.Выбрать();
				
				Пока Выборка.Следующий() Цикл
					ДанныеВыбора.Добавить(Выборка.Значение);
				КонецЦикла;
				
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

