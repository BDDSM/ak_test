
Процедура ДействияФормыИсторияИзменений(Кнопка)
	
	ИсторияИзменений = Отчеты.ИсторияИзмененийОбъектов.Создать();
	ИсторияИзменений.СсылкаНаОбъект = ЭлементыФормы.СправочникСписок.ТекущиеДанные.Ссылка;
	
	Форма = ИсторияИзменений.ПолучитьФорму("ФормаОтчета");
	Форма.СформироватьТаблицуВерсий();
	Форма.Открыть();
	
КонецПроцедуры


Процедура СправочникСписокПриПолученииДанных(Элемент, ОформленияСтрок)
	ТекстЗапроса="ВЫБРАТЬ
	             |	КонтрагентыФайлыДоговоров.Договор
	             |ИЗ
	             |	Справочник.Контрагенты.ФайлыДоговоров КАК КонтрагентыФайлыДоговоров
	             |
	             |СГРУППИРОВАТЬ ПО
	             |	КонтрагентыФайлыДоговоров.Договор";
	Запрос=Новый Запрос(ТекстЗапроса);			 
	ДоговорыСВложениями=Запрос.Выполнить().Выгрузить();
	Для каждого Оформление Из ОформленияСтрок Цикл
		Если ДоговорыСВложениями.Найти(Оформление.ДанныеСтроки.Ссылка)=Неопределено Тогда
			Оформление.Ячейки.ЕстьВложения.УстановитьФлажок(Ложь);
		Иначе
			Оформление.Ячейки.ЕстьВложения.УстановитьФлажок(Истина);
		КонецЕсли;	
				
	КонецЦикла;

КонецПроцедуры

