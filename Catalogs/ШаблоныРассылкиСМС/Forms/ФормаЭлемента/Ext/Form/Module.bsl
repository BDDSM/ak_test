
&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	Текст=Объект.ТекстСообщения;
	Если СокрЛП(Текст)="" Тогда
		Отказ=Истина;
		Сообщить("Не заполнен текст сообщения");
	КонецЕсли;	
	Пока Истина Цикл
		ПозЛ=Найти(Текст,"[");
		ПозП=Найти(Текст,"]");
		Если ПозЛ=0 Или ПозП=0 Тогда
			Прервать;
		КонецЕсли;	
		Параметр=Сред(Текст,ПозЛ+1,ПозП-ПозЛ-1);
		Если Параметр<>"Товар" И Параметр<>"ФИО" Тогда
			Сообщить("Неверный параметр ["+Параметр+"]");
			Отказ=Истина;
			Прервать;
		КонецЕсли;	
		Текст=Сред(Текст,ПозП+1,СтрДлина(Текст)-ПозП);
	КонецЦикла;	
КонецПроцедуры
