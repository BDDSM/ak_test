Процедура ПриУстановкеНовогоКода(СтандартнаяОбработка, Префикс)
	Префикс = СокрЛП(ЭтотОбъект.Родитель.Код);
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	Если Родитель.Пустая() Тогда
		Уровень = 0;
	Иначе
		Уровень = Родитель.Уровень()+1;
	КонецЕсли;
	
	Если ЭтотОбъект.ЭтоГруппа И Уровень > 2 Тогда
		Отказ = Истина;
		Предупреждение("Перенос групп на этот уровень не предусмотрен");
	ИначеЕсли НЕ ЭтоГруппа И НЕ Уровень = 3 Тогда
		Отказ = Истина;
		Предупреждение("Перенос элементов на этот уровень не предусмотрен");
	КонецЕсли;
	
	Если НЕ Отказ И НЕ ЭтоНовый() Тогда
		Если ЭтотОбъект.Ссылка.Родитель <> Родитель Тогда
			Режим = РежимДиалогаВопрос.ДаНет;
			Ответ = Вопрос("Внимание!!! При перемещении в другую группу изменится код статьи!"+Символы.ПС+"Продолжить?" , Режим, 0);
			Если Ответ = КодВозвратаДиалога.Нет Тогда
			    Отказ = Истина;
			Иначе
				УстановитьНовыйКод();
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры
