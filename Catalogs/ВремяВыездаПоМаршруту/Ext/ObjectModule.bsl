
Процедура ПередЗаписью(Отказ)

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ВремяВыездаПоМаршруту.Ссылка
		|ИЗ
		|	Справочник.ВремяВыездаПоМаршруту КАК ВремяВыездаПоМаршруту
		|ГДЕ
		|	ВремяВыездаПоМаршруту.Ссылка <> &Ссылка
		|	И ВремяВыездаПоМаршруту.ВремяВыезда = &ВремяВыезда
		|	И ВремяВыездаПоМаршруту.ПометкаУдаления = ЛОЖЬ";

	Запрос.УстановитьПараметр("ВремяВыезда", ВремяВыезда);
	Запрос.УстановитьПараметр("Ссылка", Ссылка);

	Результат = Запрос.Выполнить();

	ВыборкаДетальныеЗаписи = Результат.Выбрать();

	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		Сообщить("Уже есть элемент с таким временем - "+Строка(Формат(ВремяВыезда,"ДФ=HH:mm:ss")));
		Отказ=Истина;
	КонецЦикла;

	
КонецПроцедуры
