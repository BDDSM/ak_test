
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ТекстСообщенияHTML = ТекстСообщенияHTML(Объект.ТекстСообщения);
КонецПроцедуры

&НаКлиентеНаСервереБезКонтекста
Функция ТекстСообщенияHTML(Знач ТекстСообщения)
	
	Если Лев(ВРег(СокрЛП(ТекстСообщения)), 6) = "<HTML>" Тогда Возврат ТекстСообщения; КонецЕсли;
	
	Возврат
		"<HTML>
		|<HEAD><META HTTP-EQUIV='Content-Type' CONTENT='text/html; CHARSET=utf-8'></HEAD>
		|<BODY>" + ТекстСообщения + "
		|</BODY></HTML>";
	
КонецФункции

&НаКлиенте
Процедура ТекстСообщенияПриИзменении(Элемент)
	ТекстСообщенияHTML = ТекстСообщенияHTML(Объект.ТекстСообщения);
КонецПроцедуры
