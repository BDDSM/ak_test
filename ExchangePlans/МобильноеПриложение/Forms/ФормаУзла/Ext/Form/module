
Процедура ДействияФормыОчиститьВсеИзменения(Кнопка)
	
	Ответ = Вопрос("Очистить всю регистрацию изменений?", РежимДиалогаВопрос.ДаНет);
	Если Ответ <> КодВозвратаДиалога.Да Тогда
		Возврат;
	КонецЕсли;
	
	ПланыОбмена.УдалитьРегистрациюИзменений(Ссылка);
	
КонецПроцедуры

Процедура ДействияФормыЗарегистрироватьИзменения(Кнопка)
	
	Если Ссылка.Пустая() Тогда
		Ответ = Вопрос("Элемент будет записан. Продолжить?", РежимДиалогаВопрос.ДаНет);
		Если Ответ <> КодВозвратаДиалога.Да Тогда
			Возврат;
		КонецЕсли;
		Если Не ЗаписатьВФорме() Тогда
			Возврат;
		КонецЕсли;
	КонецЕсли;

	ТолькоШК = (Кнопка.Имя = "ЗарегистрироватьШК");

	ПланыОбмена.МобильноеПриложение.ЗарегистрироватьИзмененияУзла(Ссылка, ТолькоШК);
	
КонецПроцедуры

Процедура ГенерироватьНовыйКодНажатие(Элемент)
	
	КодБлокировщика = ПланыОбмена.МобильноеПриложение.ПолучитьНовыйКодБлокировщика();

КонецПроцедуры

Процедура ПриОткрытии()
	
	УстановитьДоступность();
	
КонецПроцедуры

Процедура УстановитьДоступность()
	
	ЭлементыФормы.ФормироватьЗаданияПоЦенникам.Видимость = ЗначениеЗаполнено(Магазин);
	ЭлементыФормы.УстановленныеПриложения.Видимость = ЗначениеЗаполнено(Магазин);
	ЭлементыФормы.РамкаГруппыУстановленныеПриложения.Видимость = ЗначениеЗаполнено(Магазин);
	
КонецПроцедуры 

Процедура МагазинПриИзменении(Элемент)
	
	УстановитьДоступность();
	
КонецПроцедуры
