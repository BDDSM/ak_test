//+++АК sils 08.06.2018 ИП-00018876
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ОперацияАпдекс = APDEX_ОценкаПроизводительностиКлиентСервер.ПолучитьОперацию("Открытие документа Зарплата к выплате организаций");
	APDEX_ОценкаПроизводительностиКлиентСервер.НачатьЗамерВремени(ОперацияАпдекс);
КонецПроцедуры

//+++АК sils 08.06.2018 ИП-00018876
&НаКлиенте
Процедура ПриОткрытии(Отказ)
	APDEX_ОценкаПроизводительностиКлиентСервер.ЗакончитьЗамерВремени(ОперацияАпдекс, ?(Параметры.Ключ.Пустая(), "Новый документ", "" + Объект.Ссылка));
	
	Если ЗначениеЗаполнено(Объект.Ссылка) Тогда	
		УстановитьНадписьРасходИзБанка();
	КонецЕсли;	
	
КонецПроцедуры

//+++АК LAGP 2018.11.23 Оптимизация Отображение соответствия расхода из банка
Процедура УстановитьНадписьРасходИзБанка()
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	РасходИзБанкаПеречислениеЗаработнойПлаты.Ведомость,
		|	РасходИзБанкаПеречислениеЗаработнойПлаты.Ссылка КАК РасходИзБанка
		|ИЗ
		|	Документ.РасходИзБанка.ПеречислениеЗаработнойПлаты КАК РасходИзБанкаПеречислениеЗаработнойПлаты
		|ГДЕ
		|	РасходИзБанкаПеречислениеЗаработнойПлаты.Ведомость = &Ведомость";
	
	Запрос.УстановитьПараметр("Ведомость", Объект.Ссылка);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если РезультатЗапроса.Пустой() Тогда
		Элементы.НадписьРасходИзБанка.Заголовок = "Расход из банка не определён.";	
	Иначе
		ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
		
		Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
			Элементы.НадписьРасходИзБанка.Заголовок = ВыборкаДетальныеЗаписи.РасходИзБанка;	
		КонецЦикла;
	КонецЕсли;		
	
КонецПроцедуры	
