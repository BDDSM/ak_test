
// Процедура вызывается при выборе пункта подменю "Движения документа по регистрам" меню "Перейти".
// командной панели формы. Процедура отрабатывает печать движений документа по регистрам.
//
Процедура ОсновныеДействияФормыНастройка(Кнопка)

	Если ЭлементыФормы.ДокументСписок.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;

	ОбщегоНазначения.РучнаяКорректировкаОсновнаяФорма(Ложь,ЭлементыФормы.ДокументСписок.ТекущиеДанные.Ссылка,
													  ЭлементыФормы.ДокументСписок.ТекущиеДанные.Ссылка.ПолучитьОбъект());

КонецПроцедуры // ДействияФормыДвиженияДокументаПоРегистрам()

// Процедура вызова структуры подчиненности документа
//
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	ТекДанные = ЭлементыФормы.ДокументСписок.ТекущиеДанные;
	Если ТекДанные = Неопределено Тогда
		Возврат
	КонецЕсли;
	
	ТекСсылка = ТекДанные.Ссылка;
	//Если ТекСсылка.ЗаявкаНаРасходованиеСредств.Пустая() Тогда
		РаботаСДиалогами.ПоказатьСтруктуруПодчиненностиДокумента(ТекСсылка);
	//Иначе
	//	РаботаСДиалогами.ПоказатьСтруктуруПодчиненностиДокумента(ТекСсылка.ЗаявкаНаРасходованиеСредств);
	//КонецЕсли;
	
КонецПроцедуры

Процедура ДействияФормыВыгрузитьВБухгалтерию(Кнопка)
	
	ОбъектОбработки = Обработки.НастройкаВыгрузкиПлатёжныхДокументовВБП.Создать();
	
	ОбъектОбработки.ВыгружатьРасходИзКассы 		= Истина;
	ОбъектОбработки.ВидОперацииРасходаИзКассы 	= Перечисления.ВидыОперацийРКО.Инкассация;
	
	ФормаОбработки = ОбъектОбработки.ПолучитьФорму();
	ФормаОбработки.Открыть();
	
КонецПроцедуры

//АК++ tuga #13455 19=09-16
Процедура ДействияФормыКонтрольДЗ(Кнопка)
	МассивСсылок = Новый Массив;
	Для Каждого Строка из ЭлементыФормы.ДокументСписок.ВыделенныеСтроки Цикл
		МассивСсылок.Добавить(Строка.Ссылка);
	КонецЦикла;
	ОткрытьФорму("ОбщаяФорма.АК_ФормаКонтрольДЗ",Новый Структура("СписокДокументов",МассивСсылок),ЭтаФорма);

КонецПроцедуры
//АК--

//+++susk
//ИП-00016878
Процедура ДействияФормыВыгрузитьВБП(Кнопка)
	
	ТекДанные = ЭлементыФормы.ДокументСписок.ТекущиеДанные;
	
	Если ТекДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	СсылкаНаДокумент = ТекДанные.Ссылка;
	
	Если СсылкаНаДокумент.Организация = Справочники.Организации.Избенка Тогда
		ОбщегоНазначения.СообщитьОбОшибке("У документа организация равна ""Избенка"". Выгрузка производиться не будет.");
		Возврат;
	КонецЕсли;
	
	Если СсылкаНаДокумент.Дата < Дата(2015, 4, 1) Тогда
		ОбщегоНазначения.СообщитьОбОшибке("У документа дата меньше 1 апреля 2015. Выгрузка производиться не будет.");
		Возврат;
	КонецЕсли;
	
	ОбменСБП2_0.ВыгрузитьДокументВБП("РасходИзКассы", "РасходИзКассы", СсылкаНаДокумент);	
	
КонецПроцедуры
//---susk
