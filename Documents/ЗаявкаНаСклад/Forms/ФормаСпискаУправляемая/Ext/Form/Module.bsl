
&НаКлиенте
Процедура ОтборСкладПриИзменении(Элемент)
	
	//ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(Список.Отбор, "Склад", ОтборСклад,,, ЗначениеЗаполнено(ОтборСклад));
	
КонецПроцедуры

&НаКлиенте
Процедура ЗагрузитьРаспределениеУРЗ(Команда)
	
	//+++АК KIRN 2018.07.11 ИП-00019159 
	//ОткрытьФорму("Обработка.ЗагрузитьРаспределение.Форма", , , , );
	ОткрытьФорму("Обработка.ЗагрузитьРаспределение1.Форма", , , , );
	
КонецПроцедуры

&НаКлиенте
Процедура Изменить(Команда)
	
	ТекСтрока = Элементы.СписокДокумента.ТекущиеДанные;
	Если ТекСтрока = Неопределено Тогда
		Возврат;	
	КонецЕсли;	
	
	ОткрытьЗначение(ТекСтрока.Ссылка);
	
КонецПроцедуры

&НаКлиенте
Процедура Скопировать(Команда)
	
	ТекСтрока = Элементы.СписокДокумента.ТекущиеДанные;
	Если ТекСтрока = Неопределено Тогда
		Возврат;	
	КонецЕсли;
	
	//СкопироватьСервер();
КонецПроцедуры

&НаСервере
Процедура СкопироватьСервер()
		
	//НовыйДокумент = Документы.ЗаявкаНаСклад.СоздатьДокумент();
	//ЗаполнитьЗначенияСвойств(НовыйДокумент, ТекСтрока.Ссылка,,"Ссылка, Номер, Дата");
	
КонецПроцедуры

&НаКлиенте
Процедура Удалить(Команда)
	
	ТекСтрока = Элементы.СписокДокумента.ТекущиеДанные;
	Если ТекСтрока = Неопределено Тогда
		Возврат;	
	КонецЕсли;
	
	Если НЕ ДокументПомечанНаУдаление(ТекСтрока.Ссылка) И Вопрос("Пометить документ на удаление?", РежимДиалогаВопрос.ДаНет) = КодВозвратаДиалога.Да Тогда
		УдалитьСервер(ТекСтрока.Ссылка, Истина);
	ИначеЕсли ДокументПомечанНаУдаление(ТекСтрока.Ссылка) И Вопрос("Снять пометку на удаление?", РежимДиалогаВопрос.ДаНет) = КодВозвратаДиалога.Да Тогда
		УдалитьСервер(ТекСтрока.Ссылка, Ложь);	
	Иначе
		Возврат;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Функция УдалитьСервер(СсылкаДок, Значение)
	
	ТекущийДок = СсылкаДок.ПолучитьОбъект();
	ТекущийДок.УстановитьПометкуУдаления(Значение);
	ТекущийДок.Записать();			
	
КонецФункции

&НаСервере
Функция ДокументПомечанНаУдаление(СсылкаДок)
	Если СсылкаДок.ПометкаУдаления Тогда
		Возврат Истина;
	ИначеЕсли НЕ СсылкаДок.ПометкаУдаления Тогда
		Возврат Ложь	
	КонецЕсли;
КонецФункции

&НаКлиенте
Процедура Добавить(Команда)
	
	ОткрытьФорму("Документ.ЗаявкаНаСклад.Форма.ФормаДокументаУправляемая");
	
	//ОткрытьЗначение(СоздатьДокументНаСервере());
КонецПроцедуры

&НаСервере
Функция СоздатьДокументНаСервере()
	
	Возврат Документы.ЗаявкаНаСклад.СоздатьДокумент();
	
КонецФункции

&НаКлиенте
Процедура ОбновитьФорму()

	ЭтаФорма.ОбновитьОтображениеДанных();
	
КонецПроцедуры


&НаКлиенте
Процедура СписокДокументаВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	ТекСтрока = Элементы.СписокДокумента.ТекущиеДанные;
	Если ТекСтрока = Неопределено Тогда
		Возврат;	
	КонецЕсли;	
	
	ОткрытьЗначение(ТекСтрока.Ссылка);	
	
КонецПроцедуры

&НаКлиенте
Процедура КартинкаОсталосьОтработатьНажатие(Элемент, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьОтчетПоЗаявке(Команда)
	
	ТекСтрока = Элементы.СписокДокумента.ТекущиеДанные;
	Если ТекСтрока = Неопределено Тогда
		Возврат;	
	КонецЕсли;
	
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("КлючНазначенияИспользования"	, ТекСтрока.Ссылка);
	ПараметрыФормы.Вставить("СформироватьПриОткрытии"		, Ложь);
	//ПараметрыФормы.Вставить("Отбор",                       Новый Структура("Заявка", ТекСтрока.Ссылка));
	ПараметрыФормы.Вставить("Заявка"						, ТекСтрока.Ссылка);
		
	ОткрытьФорму("Отчет.ОтчетПоЗаявкамНаСклад.Форма", ПараметрыФормы, ,
		//"Заявка=" + ТекСтрока.Ссылка
	);

КонецПроцедуры
