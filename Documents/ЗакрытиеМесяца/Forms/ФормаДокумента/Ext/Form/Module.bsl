
&НаКлиенте
Процедура МесяцОбработкиПриИзменении(Элемент)
	
	Объект.МесяцОбработки = НачалоМесяца(Объект.МесяцОбработки);
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	//+++АК sils 08.06.2018 ИП-00018876
	ОперацияАпдекс = APDEX_ОценкаПроизводительностиКлиентСервер.ПолучитьОперацию("Открытие документа Закрытие месяца");
	APDEX_ОценкаПроизводительностиКлиентСервер.НачатьЗамерВремени(ОперацияАпдекс);
	//---АК
	Если ЗначениеЗаполнено(Объект.Ссылка) Тогда
		НастройкаПравДоступа.ОпределитьДоступностьВозможностьИзмененияДокументаПоДатеЗапрета(Объект.Ссылка.ПолучитьОбъект(), ЭтаФорма);
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Элементы.СуммаКорректировкиПерепродажи.Видимость = (Объект.ВидЗакрытия = 11);
	
	//Предупреждение("При проведении документа из формы не все операции по закрытию месяца будут выполнены.
	//|Рекомендуется выполнять закрытие из формы списка документов по кнопке ""Выполнить пересчет себестоимости и закрытие месяца""");
	
	//+++АК sils 08.06.2018 ИП-00018876
	APDEX_ОценкаПроизводительностиКлиентСервер.ЗакончитьЗамерВремени(ОперацияАпдекс, ?(Параметры.Ключ.Пустая(), "Новый документ", "" + Объект.Ссылка));
	//---АК
КонецПроцедуры

&НаКлиенте
Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)
	
	Если Объект.Проведен
		И ПараметрыЗаписи.РежимЗаписи = РежимЗаписиДокумента.Проведение Тогда
		Предупреждение("Перед проведением нужно обязательно отменить проведение документа");
		Отказ = Истина;
	КонецЕсли;	
	
КонецПроцедуры
