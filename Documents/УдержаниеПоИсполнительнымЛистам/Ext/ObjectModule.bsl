
Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	// Инициализация данных документа
	Документы.УдержаниеПоИсполнительнымЛистам.ИнициализироватьДанныеДокумента(Ссылка, ДополнительныеСвойства);
	
	ТаблицаДанных = ДополнительныеСвойства.ТаблицаДанных;
	
	Движения.Финансовый.Записывать = Истина;
	Движения.РасчетыСПерсоналом.Записывать = Истина;
	
	Для Каждого Строка Из ТаблицаДанных Цикл
		Проводка = Движения.Финансовый.Добавить();
		Проводка.Период = Строка.Период;
		Проводка.СчетДт = ПланыСчетов.Финансовый.РасчетыСПерсоналомПоОплатеТруда;
		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт, Проводка.СубконтоДт, "Организации", Организация);
		//БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетДт, Проводка.СубконтоДт, "ФизическиеЛица", Строка.ФизЛицо);
		Проводка.СчетКт = ПланыСчетов.Финансовый.РасчетыССотрудникамиПоИсполнительнымЛистам;
		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетКт, Проводка.СубконтоКт, "Организации", Организация);
		БухгалтерскийУчет.УстановитьСубконто(Проводка.СчетКт, Проводка.СубконтоКт, "ФизическиеЛица", Строка.ФизЛицо);
		Проводка.Содержание = "Удержание по исполнительным листам";
		Проводка.Сумма = Строка.Сумма;
	КонецЦикла;
	
	Для Каждого Строка Из ТаблицаДанных Цикл
		 //РасчетыСПерсоналом
		 Движение 									= Движения.РасчетыСПерсоналом.Добавить();
		 Движение.ВидДвижения						= ВидДвиженияНакопления.Приход;
		 Движение.Регистратор						= Строка.Ссылка;
		 Движение.Период							= Строка.Период;
		 Движение.Организация						= Строка.Организация;
		 Движение.Физлицо							= Строка.ФизЛицо;
		 Движение.Сумма								= -Строка.Сумма;		
	 КонецЦикла;
	 
	 АК_УчетМСФО.ЗаполнитьОрганизацию(Движения.Финансовый,Организация);
	 
КонецПроцедуры
