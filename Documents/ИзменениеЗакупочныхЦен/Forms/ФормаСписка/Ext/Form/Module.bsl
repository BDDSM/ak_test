
#Область ОбработчикиСобытийФормы

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	ОбновитьОтборыКлиент();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ОтборСостоянияДокументовПриИзменении(Элемент)
	
	ОбновитьОтборыКлиент();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийТабличнойЧасти

#КонецОбласти

#Область ОбработчикиКомманд

#КонецОбласти

#Область СлужебныеФункцииИПроцедуры

&НаКлиенте
Процедура ОбновитьОтборыКлиент()
	
	МассивЗначений = Новый Массив();
	
	Если ОтборСостоянияДокументов = 0 Тогда 
		//Все документы
	ИначеЕсли ОтборСостоянияДокументов = 1 Тогда 
		//Активные документы
		МассивЗначений.Добавить(ПредопределенноеЗначение("Перечисление.СтатусыПодтвержденияИзмененияЦен.ПустаяСсылка"));
		МассивЗначений.Добавить(ПредопределенноеЗначение("Перечисление.СтатусыПодтвержденияИзмененияЦен.ОтправленЗапрос"));
		МассивЗначений.Добавить(ПредопределенноеЗначение("Перечисление.СтатусыПодтвержденияИзмененияЦен.ЧастичноСогласовано"));
		//+++АК ILIK 2018.08.06 ИП-00019438
		МассивЗначений.Добавить(ПредопределенноеЗначение("Перечисление.СтатусыПодтвержденияИзмененияЦен.Ошибка"));
		//---АК ILIK
	ИначеЕсли ОтборСостоянияДокументов = 2 Тогда 
		//Неактивные документы
		МассивЗначений.Добавить(ПредопределенноеЗначение("Перечисление.СтатусыПодтвержденияИзмененияЦен.Согласовано"));
		МассивЗначений.Добавить(ПредопределенноеЗначение("Перечисление.СтатусыПодтвержденияИзмененияЦен.Отклонено"));
	КонецЕсли;
	
	УстановитьОтборыКлиент(МассивЗначений);
	
КонецПроцедуры

&НаКлиенте
Процедура УстановитьОтборыКлиент(МассивЗначений)
	
	ИспользоватьОтбор = МассивЗначений.Количество() > 0;
	
	ДобавлятьЭлемент = Истина;
	Для Каждого ЭлементОтбора Из Список.Отбор.Элементы Цикл 
		Если СокрЛП(ЭлементОтбора.ЛевоеЗначение) = "Статус" Тогда
			ДобавлятьЭлемент = Ложь;
			Прервать;
		КонецЕсли;
	КонецЦикла;
	
	Если ИспользоватьОтбор И ДобавлятьЭлемент Тогда
		ЭлементОтбора = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	КонецЕсли;
	
	Если Не ИспользоватьОтбор И ЭлементОтбора <> Неопределено Тогда
		ЭлементОтбора.Использование = Ложь;
		Возврат;
	ИначеЕсли Не ИспользоватьОтбор Тогда
		Возврат;
	КонецЕсли;
	
	ЭлементОтбора.ЛевоеЗначение  = Новый ПолеКомпоновкиДанных("Статус");
	ЭлементОтбора.ВидСравнения   = ВидСравненияКомпоновкиДанных.ВСписке;
	ЭлементОтбора.ПравоеЗначение = МассивЗначений;
	ЭлементОтбора.Использование = Истина;
	
КонецПроцедуры

#КонецОбласти

