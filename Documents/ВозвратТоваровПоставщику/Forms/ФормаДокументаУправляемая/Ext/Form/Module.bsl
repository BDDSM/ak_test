
Функция ПолучтьОрдераСНедопустимымВидомОперации()
	
	Для Каждого СтрокаТЧ Из Объект.РасходныеОрдера Цикл
		
		Если СтрокаТЧ.РасходныйОрдер.ВидОперации <> Перечисления.ВидыОперацийРасходСкладскойУчет.ВозвратПоставщику Тогда
			Возврат Истина;
		КонецЕсли;
		
	КонецЦикла;
	
	Возврат Ложь;
	
КонецФункции

&НаКлиенте
Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)
	
	Если ПараметрыЗаписи.РежимЗаписи = РежимЗаписиДокумента.Проведение
			И Объект.РасходныеОрдера.Количество() > 0 Тогда
		
		Если ПолучтьОрдераСНедопустимымВидомОперации() Тогда
			ОбщегоНазначения.СообщитьОбОшибке("Невозможно провести документ! Имеются расходные ордера с видом операции отличным от <<Возврат поставщику>>", Отказ);
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

//+++АК sils 07.06.2018 ИП-00018876
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ОперацияАпдекс = APDEX_ОценкаПроизводительностиКлиентСервер.ПолучитьОперацию("Открытие документа Возврат товаров поставщику");
	APDEX_ОценкаПроизводительностиКлиентСервер.НачатьЗамерВремени(ОперацияАпдекс);
КонецПроцедуры

//+++АК sils 07.06.2018 ИП-00018876
&НаКлиенте
Процедура ПриОткрытии(Отказ)
	APDEX_ОценкаПроизводительностиКлиентСервер.ЗакончитьЗамерВремени(ОперацияАпдекс, ?(Параметры.Ключ.Пустая(), "Новый документ", "" + Объект.Ссылка));
КонецПроцедуры
