
Процедура ПриОткрытии()
	
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("Контрагент"	, ЭтаФорма.Контрагент);
	Запрос.УстановитьПараметр("Номенклатура", ЭтаФорма.Номенклатура);
	Запрос.Текст =
	"ВЫБРАТЬ
	|	ПоступлениеТоваровУслугТовары.Ссылка КАК Поступление
	|ИЗ
	|	Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
	|ГДЕ
	|	ПоступлениеТоваровУслугТовары.Ссылка.Проведен
	|	И ПоступлениеТоваровУслугТовары.Ссылка.Контрагент = &Контрагент
	|	И ПоступлениеТоваровУслугТовары.Номенклатура = &Номенклатура
	|
	|СГРУППИРОВАТЬ ПО
	|	ПоступлениеТоваровУслугТовары.Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	ПоступлениеТоваровУслугТовары.Ссылка.Дата";
	
	ЭтаФорма.ТаблицаПоступлений = Запрос.Выполнить().Выгрузить();
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОК(Кнопка)
	
	ВыбраннаяСтрока = ЭлементыФормы.ТаблицаПоступлений.ТекущаяСтрока;
    
    Если НЕ (ВыбраннаяСтрока = Неопределено) Тогда
        Закрыть(ВыбраннаяСтрока.Поступление)
    КонецЕсли;
	
КонецПроцедуры

Процедура ТаблицаПоступленийВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	
	Закрыть(ВыбраннаяСтрока.Поступление);	
	
КонецПроцедуры
