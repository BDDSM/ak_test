
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	//Вставить содержимое обработчика.
	//ПараметрыФормы = Новый Структура("", );
	//ОткрытьФорму("Документ.ПредпоступлениеПоКомплектации.ФормаСписка", ПараметрыФормы, ПараметрыВыполненияКоманды.Источник, ПараметрыВыполненияКоманды.Уникальность, ПараметрыВыполненияКоманды.Окно);
	СсылкаНаКомплектацию = НайтиКомплектациюСервер(ПараметрКоманды);
	Если ЗначениеЗаполнено(СсылкаНаКомплектацию) Тогда
		Парам = Новый Структура;
		Парам.Вставить("Ключ",СсылкаНаКомплектацию);
		ОткрытьФорму("Документ.КомплектацияМагазинаПоСделкамСПоставщиком.ФормаОбъекта",Парам);
	КонецЕсли;	
КонецПроцедуры

&НаСервере
Функция НайтиКомплектациюСервер(СсылкаНаПредпоступление)
	ТекстЗапроса="ВЫБРАТЬ
	             |	КомплектацияМагазинаПоСделкамСПоставщиком.Ссылка
	             |ИЗ
	             |	Документ.ПредпоступлениеПоКомплектации КАК ПредпоступлениеПоКомплектации
	             |		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.КомплектацияМагазинаПоСделкамСПоставщиком КАК КомплектацияМагазинаПоСделкамСПоставщиком
	             |		ПО ПредпоступлениеПоКомплектации.Магазин = КомплектацияМагазинаПоСделкамСПоставщиком.Магазин
	             |ГДЕ
	             |	ПредпоступлениеПоКомплектации.Ссылка = &Ссылка
	             |	И КомплектацияМагазинаПоСделкамСПоставщиком.Проведен";
	Запрос = Новый Запрос(ТекстЗапроса);			 
	Запрос.УстановитьПараметр("Ссылка",СсылкаНаПредпоступление);
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		Возврат Выборка.Ссылка;
	Иначе
		Возврат Неопределено;
	КонецЕсли;	
КонецФункции
