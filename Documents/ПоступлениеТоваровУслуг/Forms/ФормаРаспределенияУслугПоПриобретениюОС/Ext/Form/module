
Процедура ПриОткрытии()
	
	Источник_ТекущийДокумент = НЕ ЗначениеЗаполнено(ВыбранныйДокумент);
	ИсточникОСПриИзменении(Неопределено);
	
КонецПроцедуры

Процедура ИсточникОСПриИзменении(Элемент)

	ЭлементыФормы.ВыбранныйДокумент.Доступность = НЕ Источник_ТекущийДокумент;
	
КонецПроцедуры

Процедура ВыбранныйДокументНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	//
	Форма = Документы.ПоступлениеТоваровУслуг.ПолучитьФормуВыбора(, Элемент);
	Форма.Отбор.ВидОперации.ВидСравнения	= ВидСравнения.Равно;
	Форма.Отбор.ВидОперации.Значение		= Перечисления.ВидыОперацийПоступлениеТоваровУслуг.Оборудование;
	Форма.Отбор.ВидОперации.Использование	= Истина;
	Форма.Открыть();

КонецПроцедуры

Процедура КнопкаРаспределитьНажатие(Кнопка)
	
	Если НЕ Источник_ТекущийДокумент
			И НЕ ЗначениеЗаполнено(ВыбранныйДокумент) Тогда
		Предупреждение("Необходимо выбрать документ!");
		Возврат;
	КонецЕсли;
	
	ЭтаФорма.ИсточникРаспределения	= ?(Источник_ТекущийДокумент, ЭтаФорма.ИсточникРаспределения, ВыбранныйДокумент);
	ЭтаФорма.Закрыть(Истина);
	
КонецПроцедуры
