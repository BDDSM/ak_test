
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Контрагент=ПараметрыСеанса.ТекущийПользователь.ФизЛицо.Контрагент;
    Если ЗначениеЗаполнено(Контрагент) Тогда
		Элемент = Список.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
		Элемент.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Подрядчик");
		Элемент.ВидСравнения = ВидСравненияКомпоновкиДанных.Равно;
		Элемент.РежимОтображения = РежимОтображенияЭлементаНастройкиКомпоновкиДанных.Недоступный;
		Элемент.ПравоеЗначение = Контрагент;
		Элемент.Использование = Истина;
	КонецЕсли; 
	Элементы.ФормаСписокРассылки.Видимость=Не ЗначениеЗаполнено(Контрагент);
КонецПроцедуры

&НаКлиенте
Функция СписокРассылки(Команда)
	ГруппаРассылкиНовыеПравилаРаботыСотрудников = ГруппаРассылкиПолучить();
	Если ЗначениеЗаполнено(ГруппаРассылкиНовыеПравилаРаботыСотрудников) Тогда
		СтруктураОтбора = Новый Структура("Группа", ГруппаРассылкиНовыеПравилаРаботыСотрудников);
		Мас=Новый Массив;
		Мас.Добавить(ГруппаРассылкиНовыеПравилаРаботыСотрудников);
		ОткрытьФорму("РегистрСведений.АК_ГруппыРассылки.ФормаСписка", Новый Структура("Отбор,Группы", СтруктураОтбора,Мас), ЭтаФорма);
	КонецЕсли;
КонецФункции

 &НаСервереБезКонтекста
Функция ГруппаРассылкиПолучить()
	Возврат Справочники.АК_ГруппыРассылки.НайтиПоНаименованию("Рассылка при изменении графиков");
КонецФункции
