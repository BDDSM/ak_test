
// Процедура вызывается при выборе пункта подменю "Движения документа по регистрам" меню "Перейти".
// командной панели формы. Процедура отрабатывает печать движений документа по регистрам.
//
Процедура ОсновныеДействияФормыНастройка(Кнопка)

	ТекДанные = ЭлементыФормы.ДокументСписок.ТекущиеДанные;
	Если ТекДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;

	//
	БухгалтерскийУчет.ОткрытьЖурналПроводок(ТекДанные.Ссылка);

КонецПроцедуры // ДействияФормыДвиженияДокументаПоРегистрам()

// Процедура вызова структуры подчиненности документа
//
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	ТекДанные = ЭлементыФормы.ДокументСписок.ТекущиеДанные;
	Если ТекДанные = Неопределено Тогда
		Возврат
	КонецЕсли;
	
	ТекСсылка = ТекДанные.Ссылка;
	Если Не ЗначениеЗаполнено(ТекСсылка.ЗаявкаНаРасходованиеСредств) Тогда
		РаботаСДиалогами.ПоказатьСтруктуруПодчиненностиДокумента(ТекСсылка);
	Иначе
		РаботаСДиалогами.ПоказатьСтруктуруПодчиненностиДокумента(ТекСсылка.ЗаявкаНаРасходованиеСредств);
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	Если НЕ УправлениеДопПравамиПользователей.ПолучитьПравоПользователяУпр(ПланыВидовХарактеристик.ПраваПользователей.ПоказыватьВРасходеИзБанкаПеречислениеЗП, Ложь) Тогда
		ОтборВидОперации = ДокументСписок.Отбор.ВидОперации;
		ОтборВидОперации.ВидСравнения 	= ВидСравнения.НеВСписке;
		СписокИскл = Новый СписокЗначений;
		СписокИскл.Добавить(Перечисления.ВидыОперацийППИсходящее.ПеречислениеЗП);
		СписокИскл.Добавить(Перечисления.ВидыОперацийППИсходящее.ПеречислениеЗППоВедомости);
		ОтборВидОперации.Значение 		= СписокИскл;
		ОтборВидОперации.Использование 	= Истина;
		ЭлементыФормы.ДокументСписок.НастройкаОтбора.ВидОперации.Доступность = Ложь;
	КонецЕсли;
	
КонецПроцедуры

//АК++ tuga #13455 19=09-16
Процедура ДействияФормыКонтрольДЗ(Кнопка)
	МассивСсылок = Новый Массив;
	Для Каждого Строка из ЭлементыФормы.ДокументСписок.ВыделенныеСтроки Цикл
		МассивСсылок.Добавить(Строка.Ссылка);
	КонецЦикла;
	ОткрытьФорму("ОбщаяФорма.АК_ФормаКонтрольДЗ",Новый Структура("СписокДокументов",МассивСсылок),ЭтаФорма);
КонецПроцедуры
//АК--