
Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	//{{__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!
	Если ЧтоЗачитывать.Итог("Сумма")<>НаЧтоЗачитывать.Итог("Сумма") Тогда
		Сообщить("Обратите внимание! Сумма приходов и расходов по документу не совпадают. ");
	КонецЕсли;	
	// регистр РасчетыПоСделкамСПоставщиками Расход
	Движения.РасчетыПоСделкамСПоставщиками.Очистить();
	Для Каждого ТекСтрокаЧтоЗачитывать Из ЧтоЗачитывать Цикл
		Движение = Движения.РасчетыПоСделкамСПоставщиками.Добавить();
		Движение.ВидДвижения = ВидДвиженияНакопления.Приход;
		Движение.Период = Дата;
		Движение.Сделка = ТекСтрокаЧтоЗачитывать.Сделка;
		Движение.УИН_Этапа = ТекСтрокаЧтоЗачитывать.УИН_Этапа;
		Движение.Комплектация = ТекСтрокаЧтоЗачитывать.Комплектация;
		Движение.УИН_СтрокиКомплектации = ТекСтрокаЧтоЗачитывать.УИН_СтрокиКомплектации;
		Движение.ДатаПлатежа = ТекСтрокаЧтоЗачитывать.ДатаПлатежа;
		Движение.Сумма = ТекСтрокаЧтоЗачитывать.Сумма;
	КонецЦикла;
	
	Для Каждого ТекСтрокаЧтоЗачитывать Из НаЧтоЗачитывать Цикл
		Движение = Движения.РасчетыПоСделкамСПоставщиками.Добавить();
		Движение.ВидДвижения = ВидДвиженияНакопления.Расход;
		Движение.Период = Дата;
		Движение.Сделка = ТекСтрокаЧтоЗачитывать.Сделка;
		Движение.УИН_Этапа = ТекСтрокаЧтоЗачитывать.УИН_Этапа;
		Движение.Комплектация = ТекСтрокаЧтоЗачитывать.Комплектация;
		Движение.УИН_СтрокиКомплектации = ТекСтрокаЧтоЗачитывать.УИН_СтрокиКомплектации;
		Движение.ДатаПлатежа = ТекСтрокаЧтоЗачитывать.ДатаПлатежа;
		Движение.Сумма = ТекСтрокаЧтоЗачитывать.Сумма;
	КонецЦикла;

	//}}__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
КонецПроцедуры

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	ЭтотОбъект.СуммаДокумента = -ЭтотОбъект.ЧтоЗачитывать.Итог("Сумма") + ЭтотОбъект.НаЧтоЗачитывать.Итог("Сумма");
КонецПроцедуры
