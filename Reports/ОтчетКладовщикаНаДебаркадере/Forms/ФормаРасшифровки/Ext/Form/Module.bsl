
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	//Если ЗначениеЗаполнено(Элементы.Маршруты.ТекущиеДанные.Магазин) Тогда
	//	ТД=СформироватьОтчетПоПаллетамПоМагазину(Период.ДатаНачала,Период.ДатаОкончания,ЗначРекв(Склад,"Код"),Элементы.Маршруты.ТекущиеДанные.Магазин);
	//	ТД.Область(,1,,1).ШиринаКолонки=20;
	//	ТД.Область(,3,,3).ШиринаКолонки=15;
	//	ТД.Область(,5,,5).ШиринаКолонки=15;
	//	ТД.Область(,6,,6).ШиринаКолонки=5;
	//	ТД.Область(,4,,4).ШиринаКолонки=5;
	//	ТД.Показать();
	//КонецЕсли; 
	СформироватьОтчетПоПаллетамПоМагазину(Параметры.ДатаНачала,Параметры.ДатаОкончания,Параметры.СкладКод,Параметры.Магазин)	
КонецПроцедуры

&НаСервере
Процедура СформироватьОтчетПоПаллетамПоМагазину(ДатаНачала,КонецПериода,СкладКод,Магазин)
	Отчет=Отчеты.ОтчетПоПаллетам.Создать();
   
    ДатаНач=Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("НачалоПериода");
    ДатаНач.Значение=(ДатаНачала);
    ДатаНач.Использование=истина;
	
    ДатаКон=Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("КонецПериода");
    ДатаКон.Значение=(КонецДня(КонецПериода));
    ДатаКон.Использование=истина;
	
    ПарамСклад=Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("Склад");
    ПарамСклад.Значение=(Справочники.СтруктурныеЕдиницы.НайтиПоКоду(СкладКод));
    ПарамСклад.Использование=истина;
	
    ПарамМаг=Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("ТТ");
    ПарамМаг.Значение=(Справочники.СтруктурныеЕдиницы.НайтиПоНаименованию(Магазин));
    ПарамМаг.Использование=истина;	
	
	СхемаКомпоновкиДанных=Отчет.ПолучитьМакет("ОсновнаяСхемаКомпоновкиДанных");
    //Из схемы возьмем настройки по умолчанию
   
    //А как здесь передать мои только что установленные настройки?
    Настройки=Отчет.КомпоновщикНастроек.ПолучитьНастройки();
   
    //Помещаем в переменную данные о расшифровке данных
    ДанныеРасшифровки=Новый ДанныеРасшифровкиКомпоновкиДанных;
    //Формируем макет, с помощью компоновщика макета
    КомпоновщикМакета=Новый КомпоновщикМакетаКомпоновкиДанных;
    //Передаем в макет компоновки схему, настройки и данные расшифровки
    МакетКомпоновки=КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, Настройки, ДанныеРасшифровки);
    //Выполним компоновку с помощью процессора компоновки
    ПроцессорКомпоновкиДанных=Новый ПроцессорКомпоновкиДанных;
    ПроцессорКомпоновкиДанных.Инициализировать(МакетКомпоновки,,ДанныеРасшифровки);
                                                  
	//Результат=Новый ТабличныйДокумент;
    ПроцессорВывода=Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
    ПроцессорВывода.УстановитьДокумент(ТабДок);
    ПроцессорВывода.Вывести(ПроцессорКомпоновкиДанных);	
	//Возврат Результат;	
КонецПроцедуры

