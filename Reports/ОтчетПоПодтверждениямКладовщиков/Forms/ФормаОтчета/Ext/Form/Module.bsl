
&НаКлиенте
Процедура РезультатОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
	Значрасш=ПолучитьДанныеРасшифровки(Расшифровка);
	Струк = ПолучитьРекурсивноСтруктуруОтбора(Расшифровка);
	Если Струк.Свойство("Расходник") И  ТипЗнч(Значрасш)<>Тип("ДокументСсылка.РасходныйОрдерСклад")  Тогда
		СтандартнаяОбработка = Ложь;
	    Парам=Новый Структура("Расходник",Струк.Расходник);
		ОткрытьФорму("Отчет.ОтчетПоПодтверждениямКладовщиков.Форма.ФормаРасшифровки",Парам);
	
	КонецЕсли; 
	
КонецПроцедуры

Функция ПолучитьРекурсивноСтруктуруОтбора(Расшифровка, СтруктураОтбора = Неопределено)
    
		Данные = ПолучитьИзВременногоХранилища(ДанныеРасшифровки);
        ТекущееПоле = Данные.Элементы[Расшифровка];
        
        Если СтруктураОтбора = Неопределено Тогда 
            СтруктураОтбора = Новый Структура; 
        КонецЕсли; 
        ТекущееПоле = Данные.Элементы[Расшифровка];
        Если ТипЗнч(ТекущееПоле) = Тип("ЭлементРасшифровкиКомпоновкиДанныхПоля")  Тогда 
            Для каждого ТекЭл Из ТекущееПоле.ПолучитьПоля() Цикл 
                Если не Найти(ТекЭл.Поле,".") > 0 Тогда 
                    СтруктураОтбора.Вставить(ТекЭл.Поле, ТекЭл.Значение); 
                КонецЕсли;
            КонецЦикла; 
        КонецЕсли;        
        Для каждого ТекЭл Из ТекущееПоле.ПолучитьРодителей() Цикл 
            ПолучитьРекурсивноСтруктуруОтбора(ТекЭл.Идентификатор, СтруктураОтбора);    
        КонецЦикла; 
       Возврат СтруктураОтбора; 
    
КонецФункции// ПолучитьРекурсивноСтруктуруОтбора()

&НаСервере
Функция ПолучитьДанныеРасшифровки(Расшифровка)
    
    Данные = ПолучитьИзВременногоХранилища(ДанныеРасшифровки);
    Поле = Данные.Элементы.Получить(Расшифровка).ПолучитьПоля();
    //Поле = Поля.Найти("Поле");

    Если Поле = Неопределено Тогда 
        Возврат Неопределено
    Иначе 
        Возврат Поле[0].Значение;
    КонецЕсли;    
    
КонецФункции
