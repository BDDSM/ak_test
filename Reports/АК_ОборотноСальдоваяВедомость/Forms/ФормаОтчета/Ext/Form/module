Перем ТаблицаОрганизаций Экспорт;

Процедура ОбновитьОтчет(ВыводитьПолностью = Истина) Экспорт
	
	Если ВыводитьПолностью Тогда
		Если Не АК_СтандартныеОтчеты.ПроверитьЗаполнениеОбязательныхРеквизитов(ЭтаФорма) Тогда
			Возврат;
		КонецЕсли;
	КонецЕсли;  
	
	Если РежимРасшифровки Тогда
		РежимРасшифровки = Ложь;
	Иначе
		АК_СтандартныеОтчеты.СохранитьДанныеОтчета(ЭтаФорма);    
	КонецЕсли;
		
	Если НастройкиФормы.ЗакрыватьПанельПриФормированииОтчета И ВыводитьПолностью Тогда
		ЭлементыФормы.ДействияФормыДополнительные.Кнопки.ПанельПользователя.Пометка = Ложь;
		АК_СтандартныеОтчеты.УправлениеОтображениемПанелиПользователя(ЭтаФорма);
	КонецЕсли;
	
	ТекОбласть = ЭлементыФормы.Результат.ТекущаяОбласть;
	СформироватьОтчет(ЭтаФорма.ЭлементыФормы.Результат, ДанныеРасшифровки, Ложь, , ВыводитьПолностью);
	ЭлементыФормы.Результат.ТекущаяОбласть = ТекОбласть;
	АК_СтандартныеОтчеты.ОбновитьКоллекциюКнопокИстории(ЭтаФорма);
	
КонецПроцедуры

Процедура ОбновитьПанельНастроек() Экспорт
	
	АК_СтандартныеОтчеты.ОбновитьПредставлениеПоказателейОтчета(ЭтотОбъект, ЭтаФорма);
	//Группировка                   = ДанныеОтчета.Группировка.Скопировать();
	//РазвернутоеСальдо             = ДанныеОтчета.РазвернутоеСальдо.Скопировать();
	//ДополнительныеПоля            = ДанныеОтчета.ДополнительныеПоля.Скопировать();
	//РазмещениеДополнительныхПолей = ДанныеОтчета.РазмещениеДополнительныхПолей;
	
КонецПроцедуры
/////
Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	ТиповыеОтчеты.НазначитьФормеУникальныйКлючИдентификации(ЭтаФорма);
	
	СохранятьНастройкуОтчета = Не РежимРасшифровки;
	
	Если Не СохранениеНастроек.ЗаполнитьНастройкиПриОткрытииОтчета(ОтчетОбъект) Тогда
		ИнициализацияОтчета();
	КонецЕсли;
	
	АК_СтандартныеОтчеты.УстановитьВидимостьПодразделения(ЭтаФорма);
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	Если Не РежимРасшифровки Тогда
		Настроить();
	КонецЕсли;
	
	АК_СтандартныеОтчеты.ВосстановитьНастройкиФормы(ЭтаФорма);
	ОбновитьПанельНастроек();
	АК_СтандартныеОтчеты.УправлениеОтображениемОбластейОтчета(ЭтотОбъект, ЭтаФорма);
	АК_СтандартныеОтчеты.УправлениеОтображениемПанелиПользователя(ЭтаФорма);
	АК_СтандартныеОтчеты.ЗаполнитьТаблицуОрганизаций(ЭтаФорма);
	АК_СтандартныеОтчеты.ЗаполнитьТаблицуЭлементов(ЭтаФорма);
	
КонецПроцедуры

Процедура ОбновлениеОтображения()
	
	Заголовок = ПолучитьТекстЗаголовка(Ложь);
	
КонецПроцедуры
                             
Процедура ПриЗакрытии()
	
	АК_СтандартныеОтчеты.СохранитьДанныеОтчета(ЭтаФорма);
	АК_СтандартныеОтчеты.СохранитьНастройкиФормы(ЭтаФорма);
	СохранитьНастройку();
	
КонецПроцедуры
////////
Процедура ДействияФормыОсновныеСформировать(Кнопка)
	
	ОбновитьОтчет();

КонецПроцедуры

Процедура ДействияФормыОсновныеПечать(Кнопка)
	
	ЭлементыФормы.Результат.Напечатать(Ложь);
	
КонецПроцедуры

Процедура ДействияФормыОсновныеСохранитьКак(Кнопка)
	
	ПредставлениеСохраняемогоФайла = ПолучитьТекстЗаголовка(Ложь);
	АК_СтандартныеОтчеты.СохранитьКопиюРезультатаОтчета(ЭтотОбъект, ЭтаФорма, ПредставлениеСохраняемогоФайла);
	
КонецПроцедуры
//
Процедура ДействияФормыДополнительныеПанельПользователя(Кнопка)
	
	Кнопка.Пометка = Не Кнопка.Пометка;
	АК_СтандартныеОтчеты.УправлениеОтображениемПанелиПользователя(ЭтаФорма);
	
КонецПроцедуры

Процедура ДействияФормыДополнительныеИстория(Кнопка) Экспорт
	
	АК_СтандартныеОтчеты.ДействияФормыДополнительныеИстория(ЭтаФорма, Кнопка);
	
КонецПроцедуры

Процедура ДействияФормыДополнительныеВосстановитьЗначения(Кнопка)
	
	АК_СтандартныеОтчеты.ДействияФормыДополнительныеВосстановитьЗначения(ЭтотОбъект, ЭтаФорма);
	
КонецПроцедуры

Процедура ДействияФормыДополнительныеСохранитьЗначения(Кнопка)
	
	АК_СтандартныеОтчеты.ДействияФормыДополнительныеСохранитьЗначения(ЭтотОбъект, ЭтаФорма);
	
КонецПроцедуры
//
Процедура ДействияФормыДополнительныеНастройкаПанелиПользователя(Кнопка)
	
	АК_СтандартныеОтчеты.НастроитьСтраницыПанелиПользователя(ЭтаФорма, Кнопка);
		
КонецПроцедуры

Процедура КоманднаяПанельПанелиНастроекЗакрытьПанельНастроек(Кнопка)
	
	КнопкаПанельПользователя = ЭлементыФормы.ДействияФормыДополнительные.Кнопки.ПанельПользователя;
	КнопкаПанельПользователя.Пометка = Не КнопкаПанельПользователя.Пометка;
	АК_СтандартныеОтчеты.УправлениеОтображениемПанелиПользователя(ЭтаФорма);
	
КонецПроцедуры
//
Процедура ПоказателиОтчетаПриИзмененииФлажка(Элемент, Колонка)
	
	АК_СтандартныеОтчеты.ПоказателиОтчетаПриИзмененииФлажка(ЭтотОбъект, Элемент, Колонка);
	
КонецПроцедуры
//
Процедура КоманднаяПанельДополнительныеПоляДобавитьЭлемент(Кнопка)
	
	АК_СтандартныеОтчеты.ДополнительныеПоляДобавитьЭлемент(ЭтотОбъект, ЭтаФорма);
	
КонецПроцедуры

Процедура КоманднаяПанельДополнительныеПоляВключитьВсе(Кнопка)
	
	ДополнительныеПоля.ЗаполнитьЗначения(Истина, "Использование");
	
КонецПроцедуры

Процедура КоманднаяПанельДополнительныеПоляВыключитьВсе(Кнопка)
	
	ДополнительныеПоля.ЗаполнитьЗначения(Ложь, "Использование");
	
КонецПроцедуры

Процедура ДополнительныеПоляПередНачаломДобавления(Элемент, Отказ, Копирование)
	
	АК_СтандартныеОтчеты.ДополнительныеПоляДобавитьЭлемент(ЭтотОбъект, ЭтаФорма, Отказ);
	
КонецПроцедуры

Процедура ДополнительныеПоляПередНачаломИзменения(Элемент, Отказ)
	
	АК_СтандартныеОтчеты.ДополнительныеПоляПередНачаломИзменения(ЭтотОбъект, ЭтаФорма, Элемент, Отказ);
	
КонецПроцедуры

Процедура ДополнительныеПоляПриПолученииДанных(Элемент, ОформленияСтрок)
	
	АК_СтандартныеОтчеты.РаскраскаНедоступныхПриПолученииДанных(Элемент, ОформленияСтрок);
	
КонецПроцедуры
//
Процедура КоманднаяПанельГруппировкаВключитьВсе(Кнопка)
	
	Группировка.ЗаполнитьЗначения(Истина, "Использование");
	
КонецПроцедуры

Процедура КоманднаяПанельГруппировкаВыключитьВсе(Кнопка)
	
	Группировка.ЗаполнитьЗначения(Ложь, "Использование");
	
КонецПроцедуры

Процедура ГруппировкаПриАктивизацииКолонки(Элемент)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриАктивизацииКолонки(Элемент);
	
КонецПроцедуры

Процедура ГруппировкаПередНачаломДобавления(Элемент, Отказ, Копирование)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриИзменении(ЭтаФорма, "Группировка", Отказ);
	
КонецПроцедуры

Процедура ГруппировкаПередНачаломИзменения(Элемент, Отказ)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриИзменении(ЭтаФорма, "Группировка", Отказ, Истина);
	
КонецПроцедуры

Процедура ГруппировкаПриПолученииДанных(Элемент, ОформленияСтрок)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриПолученииДанных(Элемент, ОформленияСтрок);
	
КонецПроцедуры

Процедура ГруппировкаПриИзмененииФлажка(Элемент, Колонка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриИзмененииФлажка(ЭтаФорма, "Группировка", Колонка);
	
КонецПроцедуры

Процедура ГруппировкаПредставлениеНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПредставлениеНачалоВыбора(ЭтаФорма, "Группировка", Элемент, СтандартнаяОбработка);
	
КонецПроцедуры

Процедура ГруппировкаПредставлениеОчистка(Элемент, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПредставлениеОчистка(ЭтаФорма, "Группировка", Элемент, СтандартнаяОбработка);

КонецПроцедуры  

Процедура ГруппировкаПредставлениеОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПредставлениеОбработкаВыбора(ЭтаФорма, "Группировка", Элемент, ВыбранноеЗначение, СтандартнаяОбработка);
	
КонецПроцедуры
//
Процедура КоманднаяПанельРазвернутоеСальдоВключитьВсе(Кнопка)
	
	РазвернутоеСальдо.ЗаполнитьЗначения(Истина, "Использование");
	
КонецПроцедуры

Процедура КоманднаяПанельРазвернутоеСальдоВыключитьВсе(Кнопка)
	
	РазвернутоеСальдо.ЗаполнитьЗначения(Ложь, "Использование");
	
КонецПроцедуры

Процедура РазвернутоеСальдоПриАктивизацииКолонки(Элемент)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриАктивизацииКолонки(Элемент);
	
КонецПроцедуры

Процедура РазвернутоеСальдоПередНачаломДобавления(Элемент, Отказ, Копирование)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриИзменении(ЭтаФорма, "РазвернутоеСальдо", Отказ);
	
КонецПроцедуры

Процедура РазвернутоеСальдоПередНачаломИзменения(Элемент, Отказ)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриИзменении(ЭтаФорма, "РазвернутоеСальдо", Отказ, Истина);
	
КонецПроцедуры

Процедура РазвернутоеСальдоПриПолученииДанных(Элемент, ОформленияСтрок)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриПолученииДанных(Элемент, ОформленияСтрок);
	
КонецПроцедуры

Процедура РазвернутоеСальдоПриИзмененииФлажка(Элемент, Колонка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПриИзмененииФлажка(ЭтаФорма, "РазвернутоеСальдо", Колонка);
	
КонецПроцедуры

Процедура РазвернутоеСальдоПредставлениеНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПредставлениеНачалоВыбора(ЭтаФорма, "РазвернутоеСальдо", Элемент, СтандартнаяОбработка);
	
КонецПроцедуры

Процедура РазвернутоеСальдоПредставлениеОчистка(Элемент, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПредставлениеОчистка(ЭтаФорма, "РазвернутоеСальдо", Элемент, СтандартнаяОбработка);
	
КонецПроцедуры

Процедура РазвернутоеСальдоПредставлениеОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ТабличноеПолеПоСчетамПредставлениеОбработкаВыбора(ЭтаФорма, "РазвернутоеСальдо", Элемент, ВыбранноеЗначение, СтандартнаяОбработка);
	
КонецПроцедуры
//
Процедура КоманднаяПанельОтборДобавитьЭлемент(Кнопка)
	
	АК_СтандартныеОтчеты.ОтборДобавитьЭлемент(ЭтотОбъект, ЭтаФорма);
	
КонецПроцедуры

Процедура КоманднаяПанельОтборДобавитьГруппу(Кнопка)
	
	АК_СтандартныеОтчеты.ОтборДобавитьГруппу(ЭтотОбъект, ЭтаФорма, Кнопка);
	
КонецПроцедуры

Процедура ОтборПередНачаломДобавления(Элемент, Отказ, Копирование)
	
	АК_СтандартныеОтчеты.ОтборДобавитьЭлемент(ЭтотОбъект, ЭтаФорма, Отказ);
	
КонецПроцедуры

Процедура ОтборПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	ОформлениеСтроки.Ячейки.ЛевоеЗначениеДляКраткогоОтображенияЭлемента.ОтображатьКартинку = Ложь;
	
КонецПроцедуры

Процедура ОтборПриПолученииДанных(Элемент, ОформленияСтрок)
	
	АК_СтандартныеОтчеты.РаскраскаНедоступныхПриПолученииДанных(Элемент, ОформленияСтрок);
	
КонецПроцедуры

Процедура ОтборПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)
	
	АК_СтандартныеОтчеты.ОтборПриОкончанииРедактирования(ЭтаФорма, Элемент, НоваяСтрока, ОтменаРедактирования);
	
КонецПроцедуры

Процедура ОтборЛевоеЗначениеДляКраткогоОтображенияЭлементаНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ОтборНачалоВыбора(ЭтотОбъект, ЭтаФорма, Элемент, СтандартнаяОбработка);
	
КонецПроцедуры

Процедура ОтборПравоеЗначениеДляКраткогоОтображенияЭлементаНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ОтборНачалоВыбора(ЭтотОбъект, ЭтаФорма, Элемент, СтандартнаяОбработка);

КонецПроцедуры
//
Процедура ФлагВыводитьЗаголовокПриИзменении(Элемент)
	
	НастройкиФормы.Вставить("ВыводитьЗаголовок", Элемент.Значение);

КонецПроцедуры

Процедура ФлагВыводитьПодписиПриИзменении(Элемент)
	
	НастройкиФормы.Вставить("ВыводитьПодписи", Элемент.Значение);
		
КонецПроцедуры

Процедура ФлагВыводитьЕдиницуИзмеренияПриИзменении(Элемент)
	
	НастройкиФормы.Вставить("ВыводитьЕдиницуИзмерения", Элемент.Значение);
	
КонецПроцедуры

Процедура ПолеВыбораОформленияПриИзменении(Элемент)
	
	НастройкиФормы.Вставить("МакетОформления" , ЭлементыФормы.ПолеВыбораОформления.Значение);	
	
КонецПроцедуры

Процедура УсловноеОформлениеПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	АК_СтандартныеОтчеты.УсловноеОформлениеПриВыводеСтроки(ЭтотОбъект, Элемент, ОформлениеСтроки, ДанныеСтроки);
	
КонецПроцедуры

Процедура УсловноеОформлениеПриПолученииДанных(Элемент, ОформленияСтрок)
	
	АК_СтандартныеОтчеты.РаскраскаНедоступныхПриПолученииДанных(Элемент, ОформленияСтрок);
	
КонецПроцедуры
//
Процедура ПолеВводаПериодПриИзменении(Элемент)
	
	ТиповыеОтчеты.ОбновитьПараметрыПериодаПоФорме(КомпоновщикНастроек, ЭтаФорма);
	
КонецПроцедуры

Процедура КнопкаНастройкаПериодаНажатие(Элемент)
	
	ТиповыеОтчеты.НастроитьПериод(НастройкаПериода, НачалоПериода, КонецПериода);
	ТиповыеОтчеты.ОбновитьПараметрыПериодаПоФорме(КомпоновщикНастроек, ЭтаФорма);
	
КонецПроцедуры

Процедура ОрганизацияПриИзменении(Элемент)
	
	АК_СтандартныеОтчеты.ОрганизацияПриИзменении(ЭтаФорма, Элемент);
	
КонецПроцедуры 

Процедура ПодразделениеПриИзменении(Элемент)
	
	АК_СтандартныеОтчеты.ПодразделениеПриИзменении(ЭтаФорма, Элемент);
	
КонецПроцедуры
////
Процедура РезультатОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
	
	АК_СтандартныеОтчеты.ОбработкаРасшифровкиСтандартногоОтчета(ЭтотОбъект, ЭтаФорма, Расшифровка, СтандартнаяОбработка);
	
КонецПроцедуры

Процедура РезультатПриАктивизацииОбласти(Элемент)
	
	АК_СтандартныеОтчеты.РезультатПриАктивизацииОбласти(ЭтаФорма, Элемент);
	
КонецПроцедуры

Процедура УсловноеОформлениеПередНачаломИзменения(Элемент, Отказ)
	
	ТекКолонка = Элемент.ТекущаяКолонка;
	Если ТекКолонка = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	// Менять представление у предопределенных режимов оформления, нельзя
	Если ТекКолонка.Данные = "ПредставлениеДляКраткогоОтображенияЭлемента" И Элемент.ТекущаяСтрока.Представление <> "" Тогда
		Отказ = Истина;
	КонецЕсли;
	
КонецПроцедуры
