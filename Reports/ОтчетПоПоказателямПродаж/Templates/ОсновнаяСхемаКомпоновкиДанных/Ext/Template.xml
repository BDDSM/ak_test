<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>ЛистыУчета</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Торговая точка</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:required>true</dcscom:required>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГруппаТорговойТочки</dataPath>
			<field>ГруппаТорговойТочки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа торговой точки</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НомерНедели</dataPath>
			<field>НомерНедели</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоПродажи</dataPath>
			<field>КоличествоПродажи</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПродажи</dataPath>
			<field>СуммаПродажи</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>УстановленПлакат</dataPath>
			<field>УстановленПлакат</field>
			<useRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РекламаРазмещена</dataPath>
			<field>РекламаРазмещена</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоСписанияСрок</dataPath>
			<field>КоличествоСписанияСрок</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаСписанияСрок</dataPath>
			<field>СуммаСписанияСрок</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СписаниеПоКачеству</dataPath>
			<field>СписаниеПоКачеству</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество списания кач</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаСписанияПоКачеству</dataPath>
			<field>СуммаСписанияПоКачеству</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма списания кач</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дегустация</dataPath>
			<field>Дегустация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество дегустация</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаДегустация</dataPath>
			<field>СуммаДегустация</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоСписанияБой</dataPath>
			<field>КоличествоСписанияБой</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество списания бой</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаСписанияБой</dataPath>
			<field>СуммаСписанияБой</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма списания бой</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПродажиПредыдущаяНеделя</dataPath>
			<field>СуммаПродажиПредыдущаяНеделя</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаОтносительныеПродажи</dataPath>
			<field>СуммаОтносительныеПродажи</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаОтносительныеПродажиПредыдущаяНеделя</dataPath>
			<field>СуммаОтносительныеПродажиПредыдущаяНеделя</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>БезНовыхТТ</dataPath>
			<field>БезНовыхТТ</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НаличиеНаТочке</dataPath>
			<field>НаличиеНаТочке</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПотерянныеПродажиПрочие</dataPath>
			<field>СуммаПотерянныеПродажиПрочие</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НаличиеНаРЦ</dataPath>
			<field>НаличиеНаРЦ</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПотериНеВыполненЗаказ</dataPath>
			<field>СуммаПотериНеВыполненЗаказ</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВыручкаОтношение</dataPath>
			<field>ВыручкаОтношение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Выручка (к предыдущей неделе)</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Свежесть</dataPath>
			<field>Свежесть</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НачОстатокСуммаСкоропортящийся</dataPath>
			<field>НачОстатокСуммаСкоропортящийся</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПродажСкоропортящийся</dataPath>
			<field>СуммаПродажСкоропортящийся</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаДефицит1</dataPath>
			<field>СуммаДефицит1</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дефицит</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаДефицит6</dataPath>
			<field>СуммаДефицит6</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дефицит 6</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Наценка</dataPath>
			<field>Наценка</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СебестоимостьПродаж</dataPath>
			<field>СебестоимостьПродаж</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатураЕстьВПрайсеТорговойТочки</dataPath>
			<field>НоменклатураЕстьВПрайсеТорговойТочки</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КлассТочки</dataPath>
			<field>КлассТочки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Класс</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПотерянныеПродажи</dataPath>
			<field>СуммаПотерянныеПродажи</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НетУпаковкиКоличество</dataPath>
			<field>НетУпаковкиКоличество</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=3</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НетУпаковкиСумма</dataPath>
			<field>НетУпаковкиСумма</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	РазмещеннаяРекламаОТорговыхТочках.ТорговаяТочка,
	МАКСИМУМ(РазмещеннаяРекламаОТорговыхТочках.Период) КАК Период
ПОМЕСТИТЬ ВТРеклама
ИЗ
	РегистрСведений.РазмещеннаяРекламаОТорговыхТочках КАК РазмещеннаяРекламаОТорговыхТочках

СГРУППИРОВАТЬ ПО
	РазмещеннаяРекламаОТорговыхТочках.ТорговаяТочка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЛистУчетаТовары.Ссылка.ТорговаяТочка,
	НАЧАЛОПЕРИОДА(ЛистУчетаТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	СоответствиеДатДнямНедели.НомерНедели,
	ЛистУчетаТовары.Номенклатура,
	ЛистУчетаТовары.Ссылка.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
	ЛистУчетаТовары.Сумма КАК СуммаПродажи
ПОМЕСТИТЬ ВТПродажиПредыдущаяНеделя
ИЗ
	Документ.ЛистУчета.Товары КАК ЛистУчетаТовары
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеДатДнямНедели КАК СоответствиеДатДнямНедели
		ПО ЛистУчетаТовары.Ссылка.Дата = СоответствиеДатДнямНедели.Дата
ГДЕ
	ЛистУчетаТовары.Ссылка.Проведен = ИСТИНА
	И ЛистУчетаТовары.Ссылка.Дата МЕЖДУ ДОБАВИТЬКДАТЕ(&amp;НачалоПериода, ДЕНЬ, -7) И ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -7)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ПотерянныеПродажиПоТочкам.Дата КАК Дата,
	ПотерянныеПродажиПоТочкам.ТорговаяТочка КАК ТорговаяТочка,
	СоответствиеДатДнямНедели.НомерНедели КАК НомерНедели,
	ПотерянныеПродажиПоТочкам.Номенклатура КАК Номенклатура,
	СУММА(ВЫБОР
			КОГДА ПотерянныеПродажиПоТочкам.ТипПотери = ЗНАЧЕНИЕ(Перечисление.ТипыПотерь.Значение1)
				ТОГДА ПотерянныеПродажиПоТочкам.Сумма
			ИНАЧЕ 0
		КОНЕЦ) КАК СуммаПотери,
	СУММА(ВЫБОР
			КОГДА ПотерянныеПродажиПоТочкам.ПричинаПотери = &amp;ПричинаПотери
					И ПотерянныеПродажиПоТочкам.ТипПотери = ЗНАЧЕНИЕ(Перечисление.ТипыПотерь.Значение1)
				ТОГДА ПотерянныеПродажиПоТочкам.Сумма
			ИНАЧЕ 0
		КОНЕЦ) КАК СуммаПрочиеПотери,
	СУММА(ВЫБОР
			КОГДА ПотерянныеПродажиПоТочкам.ПричинаПотери = &amp;ПричинаПотериНеВыполненЗаказ
					И ПотерянныеПродажиПоТочкам.ТипПотери = ЗНАЧЕНИЕ(Перечисление.ТипыПотерь.Значение1)
				ТОГДА ПотерянныеПродажиПоТочкам.Сумма
			ИНАЧЕ 0
		КОНЕЦ) КАК СуммаПотериНеВыполненЗаказ,
	СУММА(ВЫБОР
			КОГДА ПотерянныеПродажиПоТочкам.ТипПотери = ЗНАЧЕНИЕ(Перечисление.ТипыПотерь.Значение1)
				ТОГДА ПотерянныеПродажиПоТочкам.Сумма
			ИНАЧЕ 0
		КОНЕЦ) КАК СуммаДефицит1,
	СУММА(ВЫБОР
			КОГДА ПотерянныеПродажиПоТочкам.ТипПотери = ЗНАЧЕНИЕ(Перечисление.ТипыПотерь.Значение6)
				ТОГДА ПотерянныеПродажиПоТочкам.Сумма
			ИНАЧЕ 0
		КОНЕЦ) КАК СуммаДефицит6
ПОМЕСТИТЬ ВТПотерянныеПродажи
ИЗ
	РегистрСведений.ПотерянныеПродажиПоТочкам КАК ПотерянныеПродажиПоТочкам
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеДатДнямНедели КАК СоответствиеДатДнямНедели
		ПО ПотерянныеПродажиПоТочкам.Дата = СоответствиеДатДнямНедели.Дата
ГДЕ
	ПотерянныеПродажиПоТочкам.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода

СГРУППИРОВАТЬ ПО
	ПотерянныеПродажиПоТочкам.Дата,
	ПотерянныеПродажиПоТочкам.ТорговаяТочка,
	ПотерянныеПродажиПоТочкам.Номенклатура,
	СоответствиеДатДнямНедели.НомерНедели
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЗ_Запрос.Номенклатура КАК Номенклатура,
	ВЫБОР
		КОГДА ВЗ_Запрос.Количество = 0
			ТОГДА 0
		ИНАЧЕ ВЗ_Запрос.Сумма / ВЗ_Запрос.Количество
	КОНЕЦ КАК Себестоимость
ПОМЕСТИТЬ ВТСебестоимость
ИЗ
	(ВЫБРАТЬ
		ПоступлениеТоваровУслугТовары.Номенклатура КАК Номенклатура,
		СУММА(ПоступлениеТоваровУслугТовары.Количество) КАК Количество,
		СУММА(ПоступлениеТоваровУслугТовары.Количество * ПоступлениеТоваровУслугТовары.Цена) КАК Сумма
	ИЗ
		Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
	ГДЕ
		ПоступлениеТоваровУслугТовары.Ссылка.Проведен = ИСТИНА
		И ПоступлениеТоваровУслугТовары.Ссылка.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
	
	СГРУППИРОВАТЬ ПО
		ПоступлениеТоваровУслугТовары.Номенклатура) КАК ВЗ_Запрос

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЦеныНоменклатурыСрезПоследних.ТорговаяТочка КАК ТорговаяТочка,
	ЦеныНоменклатурыСрезПоследних.Номенклатура КАК Номенклатура,
	МАКСИМУМ(ЦеныНоменклатурыСрезПоследних.Цена) КАК Цена
ПОМЕСТИТЬ ВТПрайсНоменклатуры
ИЗ
	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(&amp;КонецПериода, ) КАК ЦеныНоменклатурыСрезПоследних

СГРУППИРОВАТЬ ПО
	ЦеныНоменклатурыСрезПоследних.ТорговаяТочка,
	ЦеныНоменклатурыСрезПоследних.Номенклатура

ИНДЕКСИРОВАТЬ ПО
	ТорговаяТочка,
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	КоличествоПродавцовНаТочкахСрезПоследних.ТорговаяТочка,
	КоличествоПродавцовНаТочкахСрезПоследних.Представление КАК Класс
ПОМЕСТИТЬ ВТКлассыТочек
ИЗ
	РегистрСведений.КоличествоПродавцовНаТочках.СрезПоследних(&amp;КонецПериода, ) КАК КоличествоПродавцовНаТочкахСрезПоследних
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	БланкТовары.Номенклатура,
	МАКСИМУМ(ВЫБОР
			КОГДА БланкТовары.Ссылка.ТипБланка = ЗНАЧЕНИЕ(Перечисление.ТипыБланков.Тип4)
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ) КАК ЕстьТип4,
	МАКСИМУМ(ВЫБОР
			КОГДА БланкТовары.Ссылка.ТипБланка = ЗНАЧЕНИЕ(Перечисление.ТипыБланков.Тип3)
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ) КАК ЕстьТип3,
	СУММА(ВЫБОР
			КОГДА БланкТовары.Ссылка.ТипБланка = ЗНАЧЕНИЕ(Перечисление.ТипыБланков.Тип4)
				ТОГДА БланкТовары.КоличествоСклад
			ИНАЧЕ 0
		КОНЕЦ) КАК КоличествоСклад4,
	СУММА(ВЫБОР
			КОГДА БланкТовары.Ссылка.ТипБланка = ЗНАЧЕНИЕ(Перечисление.ТипыБланков.Тип3)
				ТОГДА БланкТовары.КоличествоСклад
			ИНАЧЕ 0
		КОНЕЦ) КАК КоличествоСклад3,
	БланкТовары.Ссылка.ТорговаяТочка,
	НАЧАЛОПЕРИОДА(БланкТовары.Ссылка.Дата, ДЕНЬ) КАК Дата
ПОМЕСТИТЬ ВТБланки
ИЗ
	Документ.Бланк.Товары КАК БланкТовары
ГДЕ
	БланкТовары.Ссылка.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
	И БланкТовары.Ссылка.Проведен = ИСТИНА
	И БланкТовары.Ссылка.ТипБланка &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыБланков.Тип1)
	И БланкТовары.Ссылка.ТипБланка &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыБланков.Тип2)
{ГДЕ
	БланкТовары.Ссылка.ТорговаяТочка.*}

СГРУППИРОВАТЬ ПО
	БланкТовары.Ссылка.ТорговаяТочка,
	БланкТовары.Номенклатура,
	НАЧАЛОПЕРИОДА(БланкТовары.Ссылка.Дата, ДЕНЬ)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.ТорговаяТочка, ВТПотерянныеПродажи.ТорговаяТочка) КАК ТорговаяТочка,
	ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.Дата, ВТПотерянныеПродажи.Дата) КАК Дата,
	ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.НомерНедели, ВТПотерянныеПродажи.НомерНедели) КАК НомерНедели,
	ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.Номенклатура, ВТПотерянныеПродажи.Номенклатура) КАК Номенклатура,
	ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.ГруппаТорговойТочки, ВТПотерянныеПродажи.ТорговаяТочка.ГоловноеПодразделение) КАК ГруппаТорговойТочки,
	ВЗ_СвернутыеЛистыУчета.СуммаПродажи,
	ВЗ_СвернутыеЛистыУчета.КоличествоПродажи,
	ВЗ_СвернутыеЛистыУчета.УстановленПлакат,
	ВЗ_СвернутыеЛистыУчета.РекламаРазмещена,
	ВЗ_СвернутыеЛистыУчета.КоличествоСписанияСрок,
	ВЗ_СвернутыеЛистыУчета.КоличествоСписанияБой,
	ВЗ_СвернутыеЛистыУчета.СуммаСписанияСрок,
	ВЗ_СвернутыеЛистыУчета.СуммаСписанияБой,
	ВЗ_СвернутыеЛистыУчета.СписаниеПоКачеству,
	ВЗ_СвернутыеЛистыУчета.СуммаСписанияПоКачеству,
	ВЗ_СвернутыеЛистыУчета.Дегустация,
	ВЗ_СвернутыеЛистыУчета.СуммаДегустация,
	ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя,
	ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя &lt;&gt; 0
			ТОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажи
		ИНАЧЕ 0
	КОНЕЦ КАК СуммаОтносительныеПродажи,
	ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажи &lt;&gt; 0
			ТОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя
		ИНАЧЕ 0
	КОНЕЦ КАК СуммаОтносительныеПродажиПредыдущаяНеделя,
	ВЫБОР
		КОГДА ВЫБОР
				КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажи &lt;&gt; 0
					ТОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя
				ИНАЧЕ 0
			КОНЕЦ = 0
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя &lt;&gt; 0
					ТОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажи
				ИНАЧЕ 0
			КОНЕЦ / ВЫБОР
				КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажи &lt;&gt; 0
					ТОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя
				ИНАЧЕ 0
			КОНЕЦ
	КОНЕЦ * 100 КАК БезНовыхТТ,
	ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПрочиеПотери, 0) КАК СуммаПотерянныеПродажиПрочие,
	ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПотери, 0) КАК СуммаПотерянныеПродажи,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПрочиеПотери, 0) + ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.СуммаПродажи, 0) = 0
			ТОГДА 0
		ИНАЧЕ 1 - ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПрочиеПотери, 0) / (ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.СуммаПродажи, 0) + ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПрочиеПотери, 0))
	КОНЕЦ * 100 КАК НаличиеНаТочке,
	ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПотериНеВыполненЗаказ, 0) КАК СуммаПотериНеВыполненЗаказ,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПотери, 0) + ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.СуммаПродажи, 0) = 0
			ТОГДА 0
		ИНАЧЕ 1 - ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПотериНеВыполненЗаказ, 0) / (ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.СуммаПродажи, 0) + ЕСТЬNULL(ВТПотерянныеПродажи.СуммаПотери, 0))
	КОНЕЦ * 100 КАК НаличиеНаРЦ,
	ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя = 0
			ТОГДА 100
		ИНАЧЕ ВЗ_СвернутыеЛистыУчета.СуммаПродажи / ВЗ_СвернутыеЛистыУчета.СуммаПродажиПредыдущаяНеделя * 100
	КОНЕЦ КАК ВыручкаОтношение,
	ВЗ_СвернутыеЛистыУчета.НачОстатокСуммаСкоропортящийся,
	ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажСкоропортящийся = 0
			ТОГДА 0
		ИНАЧЕ (ВЗ_СвернутыеЛистыУчета.СуммаПродажСкоропортящийся - ВЫБОР
				КОГДА ВЗ_СвернутыеЛистыУчета.СуммаПродажСкоропортящийся &gt; ВЗ_СвернутыеЛистыУчета.НачОстатокСуммаСкоропортящийся
					ТОГДА ВЗ_СвернутыеЛистыУчета.НачОстатокСуммаСкоропортящийся
				ИНАЧЕ ВЗ_СвернутыеЛистыУчета.СуммаПродажСкоропортящийся
			КОНЕЦ) / ВЗ_СвернутыеЛистыУчета.СуммаПродажСкоропортящийся * 100
	КОНЕЦ КАК Свежесть,
	ВЗ_СвернутыеЛистыУчета.СуммаПродажСкоропортящийся,
	ВТПотерянныеПродажи.СуммаДефицит1,
	ВТПотерянныеПродажи.СуммаДефицит6,
	ЕСТЬNULL(ВТСебестоимость.Себестоимость, 0) * ВЗ_СвернутыеЛистыУчета.КоличествоПродажи КАК СебестоимостьПродаж,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТСебестоимость.Себестоимость, 0) * ВЗ_СвернутыеЛистыУчета.КоличествоПродажи = 0
				ИЛИ ВЗ_СвернутыеЛистыУчета.СуммаПродажи = 0
			ТОГДА 0
		ИНАЧЕ (ВЗ_СвернутыеЛистыУчета.СуммаПродажи / ЕСТЬNULL(ВТСебестоимость.Себестоимость, 0) * ВЗ_СвернутыеЛистыУчета.КоличествоПродажи - 1) * 100
	КОНЕЦ КАК Наценка,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТПрайсНоменклатуры.Цена, 0) = 0
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК НоменклатураЕстьВПрайсеТорговойТочки,
	ЕСТЬNULL(ВТКлассыТочек.Класс, "") КАК КлассТочки,
	ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.КоличествоСписанияБой + ВЗ_СвернутыеЛистыУчета.КоличествоСписанияСрок - ЕСТЬNULL(ВТБланки.КоличествоСклад4, 0) &lt; 0
				ИЛИ ЕСТЬNULL(ВТБланки.ЕстьТип4, ЛОЖЬ) = ЛОЖЬ
			ТОГДА 0
		ИНАЧЕ ВЗ_СвернутыеЛистыУчета.КоличествоСписанияБой + ВЗ_СвернутыеЛистыУчета.КоличествоСписанияСрок - ЕСТЬNULL(ВТБланки.КоличествоСклад4, 0)
	КОНЕЦ + ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.Дегустация - ЕСТЬNULL(ВТБланки.КоличествоСклад3, 0) &lt; 0
				ИЛИ ЕСТЬNULL(ВТБланки.ЕстьТип3, ЛОЖЬ) = ЛОЖЬ
			ТОГДА 0
		ИНАЧЕ ВЗ_СвернутыеЛистыУчета.Дегустация - ЕСТЬNULL(ВТБланки.КоличествоСклад3, 0)
	КОНЕЦ КАК НетУпаковкиКоличество,
	ВЗ_СвернутыеЛистыУчета.Цена * (ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.КоличествоСписанияБой + ВЗ_СвернутыеЛистыУчета.КоличествоСписанияСрок - ЕСТЬNULL(ВТБланки.КоличествоСклад4, 0) &lt; 0
				ИЛИ ЕСТЬNULL(ВТБланки.ЕстьТип4, ЛОЖЬ) = ЛОЖЬ
			ТОГДА 0
		ИНАЧЕ ВЗ_СвернутыеЛистыУчета.КоличествоСписанияБой + ВЗ_СвернутыеЛистыУчета.КоличествоСписанияСрок - ЕСТЬNULL(ВТБланки.КоличествоСклад4, 0)
	КОНЕЦ + ВЫБОР
		КОГДА ВЗ_СвернутыеЛистыУчета.Дегустация - ЕСТЬNULL(ВТБланки.КоличествоСклад3, 0) &lt; 0
				ИЛИ ЕСТЬNULL(ВТБланки.ЕстьТип3, ЛОЖЬ) = ЛОЖЬ
			ТОГДА 0
		ИНАЧЕ ВЗ_СвернутыеЛистыУчета.Дегустация - ЕСТЬNULL(ВТБланки.КоличествоСклад3, 0)
	КОНЕЦ) КАК НетУпаковкиСумма
ИЗ
	(ВЫБРАТЬ
		ВЗ_ЛистыУчета.ТорговаяТочка КАК ТорговаяТочка,
		ВЗ_ЛистыУчета.Дата КАК Дата,
		ВЗ_ЛистыУчета.НомерНедели КАК НомерНедели,
		ВЗ_ЛистыУчета.Номенклатура КАК Номенклатура,
		ВЗ_ЛистыУчета.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
		СУММА(ВЗ_ЛистыУчета.СуммаПродажи) КАК СуммаПродажи,
		СУММА(ВЗ_ЛистыУчета.КоличествоПродажи) КАК КоличествоПродажи,
		МАКСИМУМ(ВЗ_ЛистыУчета.УстановленПлакат) КАК УстановленПлакат,
		МАКСИМУМ(ВЗ_ЛистыУчета.РекламаРазмещена) КАК РекламаРазмещена,
		СУММА(ВЗ_ЛистыУчета.КоличествоСписанияСрок) КАК КоличествоСписанияСрок,
		СУММА(ВЗ_ЛистыУчета.КоличествоСписанияБой) КАК КоличествоСписанияБой,
		СУММА(ВЗ_ЛистыУчета.СуммаСписанияСрок) КАК СуммаСписанияСрок,
		СУММА(ВЗ_ЛистыУчета.СуммаСписанияБой) КАК СуммаСписанияБой,
		СУММА(ВЗ_ЛистыУчета.СписаниеПоКачеству) КАК СписаниеПоКачеству,
		СУММА(ВЗ_ЛистыУчета.СуммаСписанияПоКачеству) КАК СуммаСписанияПоКачеству,
		СУММА(ВЗ_ЛистыУчета.Дегустация) КАК Дегустация,
		СУММА(ВЗ_ЛистыУчета.СуммаДегустация) КАК СуммаДегустация,
		СУММА(ВЗ_ЛистыУчета.СуммаПродажиПредыдущаяНеделя) КАК СуммаПродажиПредыдущаяНеделя,
		МАКСИМУМ(ВЗ_ЛистыУчета.НачОстатокСуммаСкоропортящийся) КАК НачОстатокСуммаСкоропортящийся,
		СУММА(ВЗ_ЛистыУчета.СуммаПродажСкоропортящийся) КАК СуммаПродажСкоропортящийся,
		МАКСИМУМ(ВЗ_ЛистыУчета.Цена) КАК Цена
	ИЗ
		(ВЫБРАТЬ
			ЛистУчетаТовары.Ссылка.ТорговаяТочка КАК ТорговаяТочка,
			НАЧАЛОПЕРИОДА(ЛистУчетаТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
			СоответствиеДатДнямНедели.НомерНедели КАК НомерНедели,
			ЛистУчетаТовары.Номенклатура КАК Номенклатура,
			ЛистУчетаТовары.Ссылка.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
			ЛистУчетаТовары.Цена КАК Цена,
			ЛистУчетаТовары.Сумма КАК СуммаПродажи,
			ВЫБОР
				КОГДА ЛистУчетаТовары.Номенклатура.КороткийСрокГодности = ИСТИНА
					ТОГДА ВЫБОР
							КОГДА ЛистУчетаТовары.НачОстаток * ЛистУчетаТовары.Цена &gt; ЛистУчетаТовары.Сумма
								ТОГДА ЛистУчетаТовары.Сумма
							ИНАЧЕ ЛистУчетаТовары.НачОстаток * ЛистУчетаТовары.Цена
						КОНЕЦ
				ИНАЧЕ 0
			КОНЕЦ КАК НачОстатокСуммаСкоропортящийся,
			ВЫБОР
				КОГДА ЛистУчетаТовары.Номенклатура.КороткийСрокГодности = ИСТИНА
					ТОГДА ЛистУчетаТовары.Сумма
				ИНАЧЕ 0
			КОНЕЦ КАК СуммаПродажСкоропортящийся,
			ЛистУчетаТовары.Расход КАК КоличествоПродажи,
			ВЫБОР
				КОГДА ВЗ_Плакаты.ТорговаяТочка ЕСТЬ NULL 
					ТОГДА ЛОЖЬ
				ИНАЧЕ ИСТИНА
			КОНЕЦ КАК УстановленПлакат,
			ВЫБОР
				КОГДА Реклама.ТорговаяТочка.Ссылка ЕСТЬ NULL 
					ТОГДА ЛОЖЬ
				КОГДА ЛистУчетаТовары.Ссылка.Дата &lt; Реклама.Период
					ТОГДА ЛОЖЬ
				ИНАЧЕ ИСТИНА
			КОНЕЦ КАК РекламаРазмещена,
			ЛистУчетаТовары.СписаниеПоСроку КАК КоличествоСписанияСрок,
			ЛистУчетаТовары.Бой КАК КоличествоСписанияБой,
			ЛистУчетаТовары.СписаниеПоСроку * ЛистУчетаТовары.Цена КАК СуммаСписанияСрок,
			ЛистУчетаТовары.Бой * ЛистУчетаТовары.Цена КАК СуммаСписанияБой,
			ЛистУчетаТовары.СписаниеПоКачеству КАК СписаниеПоКачеству,
			ЛистУчетаТовары.СписаниеПоКачеству * ЛистУчетаТовары.Цена КАК СуммаСписанияПоКачеству,
			ЛистУчетаТовары.Дегустация КАК Дегустация,
			ЛистУчетаТовары.Дегустация * ЛистУчетаТовары.Цена КАК СуммаДегустация,
			0 КАК СуммаПродажиПредыдущаяНеделя
		ИЗ
			Документ.ЛистУчета.Товары КАК ЛистУчетаТовары
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеДатДнямНедели КАК СоответствиеДатДнямНедели
				ПО ЛистУчетаТовары.Ссылка.Дата = СоответствиеДатДнямНедели.Дата
				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ РАЗЛИЧНЫЕ
					РазмещеннаяРекламаОТорговыхТочкахСрезПоследних.ТорговаяТочка КАК ТорговаяТочка
				ИЗ
					РегистрСведений.РазмещеннаяРекламаОТорговыхТочках.СрезПоследних(&amp;КонецПериода, ) КАК РазмещеннаяРекламаОТорговыхТочкахСрезПоследних) КАК ВЗ_Плакаты
				ПО ЛистУчетаТовары.Ссылка.ТорговаяТочка = ВЗ_Плакаты.ТорговаяТочка
				ЛЕВОЕ СОЕДИНЕНИЕ ВТРеклама КАК Реклама
				ПО ЛистУчетаТовары.Ссылка.ТорговаяТочка = Реклама.ТорговаяТочка
		ГДЕ
			ЛистУчетаТовары.Ссылка.Проведен = ИСТИНА
			И ЛистУчетаТовары.Ссылка.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ВТПродажиПредыдущаяНеделя.ТорговаяТочка,
			ДОБАВИТЬКДАТЕ(ВТПродажиПредыдущаяНеделя.Дата, ДЕНЬ, 7),
			ВТПродажиПредыдущаяНеделя.НомерНедели + 1,
			ВТПродажиПредыдущаяНеделя.Номенклатура,
			ВТПродажиПредыдущаяНеделя.ГруппаТорговойТочки,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			NULL,
			ВТПродажиПредыдущаяНеделя.СуммаПродажи
		ИЗ
			ВТПродажиПредыдущаяНеделя КАК ВТПродажиПредыдущаяНеделя) КАК ВЗ_ЛистыУчета
	
	СГРУППИРОВАТЬ ПО
		ВЗ_ЛистыУчета.ТорговаяТочка,
		ВЗ_ЛистыУчета.Дата,
		ВЗ_ЛистыУчета.НомерНедели,
		ВЗ_ЛистыУчета.Номенклатура,
		ВЗ_ЛистыУчета.ГруппаТорговойТочки) КАК ВЗ_СвернутыеЛистыУчета
		ПОЛНОЕ СОЕДИНЕНИЕ ВТПотерянныеПродажи КАК ВТПотерянныеПродажи
		ПО ВЗ_СвернутыеЛистыУчета.ТорговаяТочка = ВТПотерянныеПродажи.ТорговаяТочка
			И ВЗ_СвернутыеЛистыУчета.Дата = ВТПотерянныеПродажи.Дата
			И ВЗ_СвернутыеЛистыУчета.Номенклатура = ВТПотерянныеПродажи.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ ВТСебестоимость КАК ВТСебестоимость
		ПО ВЗ_СвернутыеЛистыУчета.Номенклатура = ВТСебестоимость.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ ВТПрайсНоменклатуры КАК ВТПрайсНоменклатуры
		ПО ВЗ_СвернутыеЛистыУчета.ТорговаяТочка = ВТПрайсНоменклатуры.ТорговаяТочка
			И ВЗ_СвернутыеЛистыУчета.Номенклатура = ВТПрайсНоменклатуры.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ ВТКлассыТочек КАК ВТКлассыТочек
		ПО ВЗ_СвернутыеЛистыУчета.ТорговаяТочка = ВТКлассыТочек.ТорговаяТочка
		ЛЕВОЕ СОЕДИНЕНИЕ ВТБланки КАК ВТБланки
		ПО ВЗ_СвернутыеЛистыУчета.Дата = ВТБланки.Дата
			И ВЗ_СвернутыеЛистыУчета.ТорговаяТочка = ВТБланки.ТорговаяТочка
			И ВЗ_СвернутыеЛистыУчета.Номенклатура = ВТБланки.Номенклатура
{ГДЕ
	(ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.Номенклатура, ВТПотерянныеПродажи.Номенклатура)).* КАК Номенклатура,
	(ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.НомерНедели, ВТПотерянныеПродажи.НомерНедели)) КАК НомерНедели,
	(ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.ТорговаяТочка, ВТПотерянныеПродажи.ТорговаяТочка)).* КАК ТорговаяТочка,
	(ЕСТЬNULL(ВЗ_СвернутыеЛистыУчета.ГруппаТорговойТочки, ВТПотерянныеПродажи.ТорговаяТочка.ГоловноеПодразделение)).* КАК ГруппаТорговойТочки}</query>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>Продавцы</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Документ</dataPath>
			<field>Документ</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Продавец</dataPath>
			<field>Продавец</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПрограммаОбученияОтбор</dataPath>
			<field>ПрограммаОбученияОтбор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Программа обучения, пройденная сотрудником</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПрограммаОбучения</dataPath>
			<field>ПрограммаОбучения</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Курс обучения</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЛистУчета.Ссылка КАК Документ,
	ЛистУчетаПродавцы.Продавец КАК Продавец,
	ЛистУчета.ТорговаяТочка КАК ТорговаяТочка,
	НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) КАК Дата,
	ВЫБОР
		КОГДА НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) &gt;= НАЧАЛОПЕРИОДА(ПройденныеПрограммыОбученияПродавцов.ДатаОбучения, ДЕНЬ)
			ТОГДА ПройденныеПрограммыОбученияПродавцов.ПрограммаОбучения
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ПрограммаОбучения
ИЗ
	Документ.ЛистУчета КАК ЛистУчета
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЛистУчета.Продавцы КАК ЛистУчетаПродавцы
		ПО ЛистУчета.Ссылка = ЛистУчетаПродавцы.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ПройденныеПрограммыОбученияПродавцов КАК ПройденныеПрограммыОбученияПродавцов
		ПО (ЛистУчетаПродавцы.Продавец = ПройденныеПрограммыОбученияПродавцов.Продавец)
			И (ПройденныеПрограммыОбученияПродавцов.ДатаОбучения &lt;= &amp;КонецПериода)
ГДЕ
	ЛистУчета.Проведен
	И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
{ГДЕ
	ПройденныеПрограммыОбученияПродавцов.ПрограммаОбучения.* КАК ПрограммаОбученияОтбор}</query>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>ЛистыУчетаШапка</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>РазницаПоЛУ</dataPath>
			<field>РазницаПоЛУ</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоставкаРанее10Часов</dataPath>
			<field>ДоставкаРанее10Часов</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоставкаРанее10ЧасовПроцент</dataPath>
			<field>ДоставкаРанее10ЧасовПроцент</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Прибытие на ТТ &lt; 10:00</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КолвоДокументов</dataPath>
			<field>КолвоДокументов</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЧеков</dataPath>
			<field>КоличествоЧеков</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЧековОтношение</dataPath>
			<field>КоличествоЧековОтношение</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЧековПредНеделя</dataPath>
			<field>КоличествоЧековПредНеделя</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТемператураХолодильникаВечером</dataPath>
			<field>ТемператураХолодильникаВечером</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТемператураХолодильникаУтром</dataPath>
			<field>ТемператураХолодильникаУтром</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВремяДоставки</dataPath>
			<field>ВремяДоставки</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=HH:mm</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВремяДоставкиВСекундах</dataPath>
			<field>ВремяДоставкиВСекундах</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоДокументов</dataPath>
			<field>КоличествоДокументов</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГруппаТорговойТочки</dataPath>
			<field>ГруппаТорговойТочки</field>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	СУММА((ЛистУчета.СуммаТоваров - ЛистУчета.Разница - ЛистУчета.СуммаZОтчета - ЛистУчета.ОплатаБонусами - ЛистУчета.СуммаКупонов + ЛистУчета.СторноОшибочно - ЛистУчета.СкидкаКопеек) * -1) КАК РазницаПоЛУ,
	ЛистУчета.ТорговаяТочка,
	НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) КАК Дата,
	СУММА(1) КАК КолвоДокументов,
	СУММА(ВЫБОР
			КОГДА ЛистУчета.ВремяДоставки &lt; ДАТАВРЕМЯ(1, 1, 1, 10, 0, 0)
				ТОГДА 1
			ИНАЧЕ 0
		КОНЕЦ) КАК ДоставкаРанее10Часов,
	СУММА(ЛистУчета.КоличествоЧеков) КАК КоличествоЧеков,
	ЛистУчета.ГруппаТорговойТочки
ПОМЕСТИТЬ ВТПоказателиПредыдущаяНеделя
ИЗ
	Документ.ЛистУчета КАК ЛистУчета
ГДЕ
	ЛистУчета.Проведен = ИСТИНА
	И ЛистУчета.Дата МЕЖДУ ДОБАВИТЬКДАТЕ(&amp;НачалоПериода, ДЕНЬ, -7) И ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -7)

СГРУППИРОВАТЬ ПО
	ЛистУчета.ТорговаяТочка,
	НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ),
	ЛистУчета.ГруппаТорговойТочки
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЗ_СвернутыеДанные.ТорговаяТочка,
	ВЗ_СвернутыеДанные.ГруппаТорговойТочки,
	ВЗ_СвернутыеДанные.Дата,
	ВЗ_СвернутыеДанные.РазницаПоЛУ,
	ВЗ_СвернутыеДанные.КолвоДокументов,
	ВЗ_СвернутыеДанные.ДоставкаРанее10Часов,
	ВЗ_СвернутыеДанные.ДоставкаРанее10ЧасовПроцент,
	ВЗ_СвернутыеДанные.КоличествоЧеков,
	ВЗ_СвернутыеДанные.КоличествоЧековПредНеделя,
	ВЫБОР
		КОГДА ВЗ_СвернутыеДанные.КоличествоЧековПредНеделя = 0
			ТОГДА 100
		ИНАЧЕ ВЗ_СвернутыеДанные.КоличествоЧеков / ВЗ_СвернутыеДанные.КоличествоЧековПредНеделя * 100
	КОНЕЦ КАК КоличествоЧековОтношение,
	ВЗ_СвернутыеДанные.ТемператураХолодильникаУтром,
	ВЗ_СвернутыеДанные.ТемператураХолодильникаВечером,
	ВЗ_СвернутыеДанные.ВремяДоставки,
	РАЗНОСТЬДАТ(ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0), ВЗ_СвернутыеДанные.ВремяДоставки, СЕКУНДА) КАК ВремяДоставкиВСекундах,
	ВЫБОР
		КОГДА ВЗ_СвернутыеДанные.ВремяДоставки = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
			ТОГДА 0
		ИНАЧЕ 1
	КОНЕЦ КАК КоличествоДокументов
ИЗ
	(ВЫБРАТЬ
		ВЗ_Запрос.ТорговаяТочка КАК ТорговаяТочка,
		МАКСИМУМ(ВЗ_Запрос.ГруппаТорговойТочки) КАК ГруппаТорговойТочки,
		ВЗ_Запрос.Дата КАК Дата,
		СУММА(ВЗ_Запрос.РазницаПоЛУ) КАК РазницаПоЛУ,
		СУММА(ВЗ_Запрос.РазницаПоЛУПредНеделя) КАК РазницаПоЛУПредНеделя,
		СУММА(ВЗ_Запрос.КолвоДокументов) КАК КолвоДокументов,
		СУММА(ВЗ_Запрос.КолвоДокументовПредНеделя) КАК КолвоДокументовПредНеделя,
		СУММА(ВЗ_Запрос.ДоставкаРанее10Часов) КАК ДоставкаРанее10Часов,
		СУММА(ВЗ_Запрос.ДоставкаРанее10ЧасовПредНеделя) КАК ДоставкаРанее10ЧасовПредНеделя,
		СУММА(ВЗ_Запрос.ДоставкаРанее10ЧасовПроцент) КАК ДоставкаРанее10ЧасовПроцент,
		СУММА(ВЗ_Запрос.КоличествоЧеков) КАК КоличествоЧеков,
		СУММА(ВЗ_Запрос.КоличествоЧековПредНеделя) КАК КоличествоЧековПредНеделя,
		МАКСИМУМ(ВЗ_Запрос.ТемператураХолодильникаУтром) КАК ТемператураХолодильникаУтром,
		МАКСИМУМ(ВЗ_Запрос.ТемператураХолодильникаВечером) КАК ТемператураХолодильникаВечером,
		МАКСИМУМ(ВЗ_Запрос.ВремяДоставки) КАК ВремяДоставки
	ИЗ
		(ВЫБРАТЬ
			ЛистУчета.ТорговаяТочка КАК ТорговаяТочка,
			ЛистУчета.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
			НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) КАК Дата,
			(ЛистУчета.СуммаТоваров - ЛистУчета.Разница - ЛистУчета.СуммаZОтчета - ЛистУчета.ОплатаБонусами - ЛистУчета.СуммаКупонов + ЛистУчета.СторноОшибочно - ЛистУчета.СкидкаКопеек) * -1 КАК РазницаПоЛУ,
			0 КАК РазницаПоЛУПредНеделя,
			1 КАК КолвоДокументов,
			0 КАК КолвоДокументовПредНеделя,
			ВЫБОР
				КОГДА ЛистУчета.ВремяДоставки &lt;= ДАТАВРЕМЯ(1, 1, 1, 10, 0, 0)
						И ЛистУчета.ВремяДоставки &gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
					ТОГДА 1
				ИНАЧЕ 0
			КОНЕЦ КАК ДоставкаРанее10Часов,
			0 КАК ДоставкаРанее10ЧасовПредНеделя,
			ВЫБОР
				КОГДА ЛистУчета.ВремяДоставки &lt;= ДАТАВРЕМЯ(1, 1, 1, 10, 0, 0)
						И ЛистУчета.ВремяДоставки &gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
					ТОГДА 1
				ИНАЧЕ 0
			КОНЕЦ * 100 КАК ДоставкаРанее10ЧасовПроцент,
			ЛистУчета.КоличествоЧеков КАК КоличествоЧеков,
			0 КАК КоличествоЧековПредНеделя,
			ЛистУчета.ТемператураХолодильникаУтром КАК ТемператураХолодильникаУтром,
			ЛистУчета.ТемператураХолодильникаВечером КАК ТемператураХолодильникаВечером,
			ЛистУчета.ВремяДоставки КАК ВремяДоставки
		ИЗ
			Документ.ЛистУчета КАК ЛистУчета
		ГДЕ
			ЛистУчета.Проведен = ИСТИНА
			И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ВТПоказателиПредыдущаяНеделя.ТорговаяТочка,
			NULL,
			ДОБАВИТЬКДАТЕ(ВТПоказателиПредыдущаяНеделя.Дата, ДЕНЬ, 7),
			0,
			ВТПоказателиПредыдущаяНеделя.РазницаПоЛУ,
			0,
			ВТПоказателиПредыдущаяНеделя.КолвоДокументов,
			0,
			ВТПоказателиПредыдущаяНеделя.ДоставкаРанее10Часов,
			0,
			0,
			ВТПоказателиПредыдущаяНеделя.КоличествоЧеков,
			0,
			0,
			ДАТАВРЕМЯ(1, 1, 1)
		ИЗ
			ВТПоказателиПредыдущаяНеделя КАК ВТПоказателиПредыдущаяНеделя) КАК ВЗ_Запрос
	
	СГРУППИРОВАТЬ ПО
		ВЗ_Запрос.ТорговаяТочка,
		ВЗ_Запрос.Дата) КАК ВЗ_СвернутыеДанные</query>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>МаржинальныеПоказатели</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПрибыльРасчетная</dataPath>
			<field>ПрибыльРасчетная</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Эффективность</dataPath>
			<field>Эффективность</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ЛистУчета.Дата,
	ЛистУчета.ТорговаяТочка
ПОМЕСТИТЬ ДатыПоЛистам
ИЗ
	Документ.ЛистУчета КАК ЛистУчета
ГДЕ
	ЛистУчета.Проведен = ИСТИНА
	И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	МаржинальностьТорговыхТочекСрезПоследних.Период,
	МаржинальностьТорговыхТочекСрезПоследних.ТорговаяТочка,
	МаржинальностьТорговыхТочекСрезПоследних.ТочкаБезубыточностиДневная,
	МаржинальностьТорговыхТочекСрезПоследних.ПроцентМаржинальности
ПОМЕСТИТЬ ТабМаржинальности
ИЗ
	РегистрСведений.МаржинальностьТорговыхТочек.СрезПоследних(&amp;НачалоПериода, ) КАК МаржинальностьТорговыхТочекСрезПоследних

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	МаржинальностьТорговыхТочек.Период,
	МаржинальностьТорговыхТочек.ТорговаяТочка,
	МаржинальностьТорговыхТочек.ТочкаБезубыточностиДневная,
	МаржинальностьТорговыхТочек.ПроцентМаржинальности
ИЗ
	РегистрСведений.МаржинальностьТорговыхТочек КАК МаржинальностьТорговыхТочек
ГДЕ
	МаржинальностьТорговыхТочек.Период МЕЖДУ ДОБАВИТЬКДАТЕ(&amp;НачалоПериода, ДЕНЬ, 1) И ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -1)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	МаржинальностьТорговыхТочекСрезПоследних.Период,
	МаржинальностьТорговыхТочекСрезПоследних.ТорговаяТочка,
	МаржинальностьТорговыхТочекСрезПоследних.ТочкаБезубыточностиДневная,
	МаржинальностьТорговыхТочекСрезПоследних.ПроцентМаржинальности
ИЗ
	РегистрСведений.МаржинальностьТорговыхТочек.СрезПоследних(&amp;КонецПериода, ) КАК МаржинальностьТорговыхТочекСрезПоследних
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ДатыПоЛистам.Дата,
	ДатыПоЛистам.ТорговаяТочка,
	МАКСИМУМ(ТабМаржинальности.Период) КАК Период
ПОМЕСТИТЬ ТабСДатами
ИЗ
	ДатыПоЛистам КАК ДатыПоЛистам
		ЛЕВОЕ СОЕДИНЕНИЕ ТабМаржинальности КАК ТабМаржинальности
		ПО ДатыПоЛистам.ТорговаяТочка = ТабМаржинальности.ТорговаяТочка
			И ДатыПоЛистам.Дата &gt;= ТабМаржинальности.Период

СГРУППИРОВАТЬ ПО
	ДатыПоЛистам.Дата,
	ДатыПоЛистам.ТорговаяТочка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ТабСДатами.Дата КАК Дата,
	ТабСДатами.ТорговаяТочка КАК ТорговаяТочка,
	ТабМаржинальности.ТочкаБезубыточностиДневная,
	ТабМаржинальности.ПроцентМаржинальности
ПОМЕСТИТЬ ТабПоказателиМаржинальности
ИЗ
	ТабСДатами КАК ТабСДатами
		ЛЕВОЕ СОЕДИНЕНИЕ ТабМаржинальности КАК ТабМаржинальности
		ПО ТабСДатами.Период = ТабМаржинальности.Период
			И ТабСДатами.ТорговаяТочка = ТабМаржинальности.ТорговаяТочка

ИНДЕКСИРОВАТЬ ПО
	Дата,
	ТорговаяТочка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВЗ_Данные.ТорговаяТочка,
	ВЗ_Данные.Дата,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА ВЗ_Данные.СуммаПродажи = 0
				ТОГДА 0
			ИНАЧЕ (ВЗ_Данные.СуммаПродажи - ВЗ_Данные.ТочкаБезубыточностиДневная) * ВЗ_Данные.ПроцентМаржинальности
		КОНЕЦ КАК ЧИСЛО(15, 2)) КАК ПрибыльРасчетная,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА ВЗ_Данные.СуммаПродажи = 0
				ТОГДА 0
			ИНАЧЕ (ВЗ_Данные.СуммаПродажи - ВЗ_Данные.ТочкаБезубыточностиДневная) * ВЗ_Данные.ПроцентМаржинальности / ВЗ_Данные.СуммаПродажи * 100
		КОНЕЦ КАК ЧИСЛО(15, 2)) КАК Эффективность
ИЗ
	(ВЫБРАТЬ
		ЛистУчета.ТорговаяТочка КАК ТорговаяТочка,
		НАЧАЛОПЕРИОДА(ЛистУчета.Ссылка.Дата, ДЕНЬ) КАК Дата,
		СУММА(ЛистУчета.СуммаДокумента_ПоТоварам) КАК СуммаПродажи,
		МАКСИМУМ(ЕСТЬNULL(ТабПоказателиМаржинальности.ТочкаБезубыточностиДневная, 0)) КАК ТочкаБезубыточностиДневная,
		МАКСИМУМ(ЕСТЬNULL(ТабПоказателиМаржинальности.ПроцентМаржинальности, 0)) КАК ПроцентМаржинальности
	ИЗ
		Документ.ЛистУчета КАК ЛистУчета
			ЛЕВОЕ СОЕДИНЕНИЕ ТабПоказателиМаржинальности КАК ТабПоказателиМаржинальности
			ПО ЛистУчета.Дата = ТабПоказателиМаржинальности.Дата
				И ЛистУчета.ТорговаяТочка = ТабПоказателиМаржинальности.ТорговаяТочка
	ГДЕ
		ЛистУчета.Проведен = ИСТИНА
		И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
	
	СГРУППИРОВАТЬ ПО
		ЛистУчета.ТорговаяТочка,
		НАЧАЛОПЕРИОДА(ЛистУчета.Ссылка.Дата, ДЕНЬ)) КАК ВЗ_Данные</query>
	</dataSet>
	<dataSet xsi:type="DataSetObject">
		<name>ДанныеПродажИзУНФ</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаБезСкидок</dataPath>
			<field>СуммаБезСкидок</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма продажи карты</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>2</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Торговая точка</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:required>true</dcscom:required>
			</role>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СтруктурныеЕдиницы</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаБезСкидокЗвонок</dataPath>
			<field>СуммаБезСкидокЗвонок</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма продажи карты звонок</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>2</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаБезСкидокКонтакт</dataPath>
			<field>СуммаБезСкидокКонтакт</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма продажи карты контакт</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>2</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</v8:Type>
			</valueType>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<objectName>ДанныеПродажИзУНФ</objectName>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>Регистраторы</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Ссылка</dataPath>
			<field>Ссылка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Документ</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ЛистУчета.Ссылка,
	НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) КАК Дата,
	ЛистУчета.ТорговаяТочка
ИЗ
	Документ.ЛистУчета КАК ЛистУчета
ГДЕ
	ЛистУчета.Проведен = ИСТИНА
	И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода</query>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>ПоказателиРазвитыхТочек</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГруппаТорговойТочки</dataPath>
			<field>ГруппаТорговойТочки</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РазвитыхТочек</dataPath>
			<field>РазвитыхТочек</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РазвитыхТочекПредыдущая</dataPath>
			<field>РазвитыхТочекПредыдущая</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РазвитыхТочекОтношение</dataPath>
			<field>РазвитыхТочекОтношение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Развитых точек (к предыдущей неделе)</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КолвоДнейСПродажами</dataPath>
			<field>КолвоДнейСПродажами</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВыручкаСОднойТочки</dataPath>
			<field>ВыручкаСОднойТочки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Средняя выручка</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=0</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВыручкаСОднойТочкиПредыдущая</dataPath>
			<field>ВыручкаСОднойТочкиПредыдущая</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КолвоДнейСПродажамиПредыдущая</dataPath>
			<field>КолвоДнейСПродажамиПредыдущая</field>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВыручкаСОднойТочкиОтношение</dataPath>
			<field>ВыручкаСОднойТочкиОтношение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Выручка с одной (к предыдущей неделе)</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ВЗ_Запрос.Дата,
	ВЗ_Запрос.ТорговаяТочка,
	ВЗ_Запрос.ГруппаТорговойТочки,
	ВЗ_Запрос.СуммаПродажи КАК СуммаПродажи,
	ВЫБОР
		КОГДА ВЗ_Запрос.ГруппаТорговойТочки = &amp;ГруппаРазвития
				ИЛИ ВЗ_Запрос.СуммаПродажи = 0
				ИЛИ ЕСТЬNULL(ВЗ_ПоНеделям.КолвоДнейВПериоде, 0) = 0
			ТОГДА 0
		ИНАЧЕ 1 / ВЗ_ПоНеделям.КолвоДнейВПериоде
	КОНЕЦ КАК РазвитыхТочек
ПОМЕСТИТЬ ВТПоказательПредыдущаяНеделя
ИЗ
	(ВЫБРАТЬ
		НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) КАК Дата,
		ЛистУчета.ТорговаяТочка КАК ТорговаяТочка,
		ЛистУчета.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
		СУММА(ЛистУчета.СуммаДокумента_ПоТоварам) КАК СуммаПродажи
	ИЗ
		Документ.ЛистУчета КАК ЛистУчета
	ГДЕ
		ЛистУчета.Проведен = ИСТИНА
		И ЛистУчета.Дата МЕЖДУ ДОБАВИТЬКДАТЕ(&amp;НачалоПериода, ДЕНЬ, -7) И ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -7)
	
	СГРУППИРОВАТЬ ПО
		НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ),
		ЛистУчета.ТорговаяТочка,
		ЛистУчета.ГруппаТорговойТочки) КАК ВЗ_Запрос
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			НАЧАЛОПЕРИОДА(ЛистУчета.Дата, НЕДЕЛЯ) КАК Неделя,
			ЛистУчета.ТорговаяТочка КАК ТорговаяТочка,
			КОЛИЧЕСТВО(РАЗЛИЧНЫЕ НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ)) КАК КолвоДнейВПериоде
		ИЗ
			Документ.ЛистУчета КАК ЛистУчета
		ГДЕ
			ЛистУчета.Проведен = ИСТИНА
			И ЛистУчета.Дата МЕЖДУ ДОБАВИТЬКДАТЕ(&amp;НачалоПериода, ДЕНЬ, -7) И ДОБАВИТЬКДАТЕ(&amp;КонецПериода, ДЕНЬ, -7)
		
		СГРУППИРОВАТЬ ПО
			НАЧАЛОПЕРИОДА(ЛистУчета.Дата, НЕДЕЛЯ),
			ЛистУчета.ТорговаяТочка,
			ЛистУчета.ГруппаТорговойТочки) КАК ВЗ_ПоНеделям
		ПО (НАЧАЛОПЕРИОДА(ВЗ_Запрос.Дата, НЕДЕЛЯ) = ВЗ_ПоНеделям.Неделя)
			И ВЗ_Запрос.ТорговаяТочка = ВЗ_ПоНеделям.ТорговаяТочка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЗ_ПолныйЗапрос.Дата,
	ВЗ_ПолныйЗапрос.ТорговаяТочка,
	ВЗ_ПолныйЗапрос.ГруппаТорговойТочки,
	ВЗ_ПолныйЗапрос.РазвитыхТочек,
	ВЗ_ПолныйЗапрос.РазвитыхТочекПредыдущая,
	ВЫБОР
		КОГДА ВЗ_ПолныйЗапрос.РазвитыхТочекПредыдущая = 0
			ТОГДА 100
		ИНАЧЕ ВЗ_ПолныйЗапрос.РазвитыхТочек / ВЗ_ПолныйЗапрос.РазвитыхТочекПредыдущая * 100
	КОНЕЦ КАК РазвитыхТочекОтношение,
	ВЗ_ПолныйЗапрос.СуммаПродажи КАК ВыручкаСОднойТочки,
	ВЫБОР
		КОГДА ВЗ_ПолныйЗапрос.СуммаПродажи = 0
			ТОГДА 0
		ИНАЧЕ 1
	КОНЕЦ КАК КолвоДнейСПродажами,
	ВЗ_ПолныйЗапрос.СуммаПродажиПредыдущая КАК ВыручкаСОднойТочкиПредыдущая,
	ВЫБОР
		КОГДА ВЗ_ПолныйЗапрос.СуммаПродажиПредыдущая = 0
			ТОГДА 0
		ИНАЧЕ 1
	КОНЕЦ КАК КолвоДнейСПродажамиПредыдущая,
	ВЫБОР
		КОГДА ВЗ_ПолныйЗапрос.СуммаПродажиПредыдущая = 0
			ТОГДА 100
		ИНАЧЕ ВЗ_ПолныйЗапрос.СуммаПродажи / ВЗ_ПолныйЗапрос.СуммаПродажиПредыдущая * 100
	КОНЕЦ КАК ВыручкаСОднойТочкиОтношение
ИЗ
	(ВЫБРАТЬ
		ВЗ_ПолныйЗапросБезСвертки.Дата КАК Дата,
		ВЗ_ПолныйЗапросБезСвертки.ТорговаяТочка КАК ТорговаяТочка,
		ВЗ_ПолныйЗапросБезСвертки.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
		СУММА(ВЗ_ПолныйЗапросБезСвертки.СуммаПродажи) КАК СуммаПродажи,
		СУММА(ВЗ_ПолныйЗапросБезСвертки.РазвитыхТочек) КАК РазвитыхТочек,
		СУММА(ВЗ_ПолныйЗапросБезСвертки.РазвитыхТочекПредыдущая) КАК РазвитыхТочекПредыдущая,
		СУММА(ВЗ_ПолныйЗапросБезСвертки.СуммаПродажиПредыдущая) КАК СуммаПродажиПредыдущая
	ИЗ
		(ВЫБРАТЬ
			ВЗ_Запрос.Дата КАК Дата,
			ВЗ_Запрос.ТорговаяТочка КАК ТорговаяТочка,
			ВЗ_Запрос.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
			ВЗ_Запрос.СуммаПродажи КАК СуммаПродажи,
			0 КАК СуммаПродажиПредыдущая,
			ВЫБОР
				КОГДА ВЗ_Запрос.ГруппаТорговойТочки = &amp;ГруппаРазвития
						ИЛИ ВЗ_Запрос.СуммаПродажи = 0
						ИЛИ ЕСТЬNULL(ВЗ_ПоНеделям.КолвоДнейВПериоде, 0) = 0
					ТОГДА 0
				ИНАЧЕ 1 / ВЗ_ПоНеделям.КолвоДнейВПериоде
			КОНЕЦ КАК РазвитыхТочек,
			0 КАК РазвитыхТочекПредыдущая
		ИЗ
			(ВЫБРАТЬ
				ВЗ_ТекущаяНеделя.Дата КАК Дата,
				ВЗ_ТекущаяНеделя.ТорговаяТочка КАК ТорговаяТочка,
				ВЗ_ТекущаяНеделя.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
				ВЗ_ТекущаяНеделя.СуммаПродажи КАК СуммаПродажи
			ИЗ
				(ВЫБРАТЬ
					НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) КАК Дата,
					ЛистУчета.ТорговаяТочка КАК ТорговаяТочка,
					ЛистУчета.ГруппаТорговойТочки КАК ГруппаТорговойТочки,
					СУММА(ЛистУчета.СуммаДокумента_ПоТоварам) КАК СуммаПродажи
				ИЗ
					Документ.ЛистУчета КАК ЛистУчета
				ГДЕ
					ЛистУчета.Проведен = ИСТИНА
					И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
				
				СГРУППИРОВАТЬ ПО
					НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ),
					ЛистУчета.ТорговаяТочка,
					ЛистУчета.ГруппаТорговойТочки) КАК ВЗ_ТекущаяНеделя) КАК ВЗ_Запрос
				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
					НАЧАЛОПЕРИОДА(ЛистУчета.Дата, НЕДЕЛЯ) КАК Неделя,
					ЛистУчета.ТорговаяТочка КАК ТорговаяТочка,
					КОЛИЧЕСТВО(РАЗЛИЧНЫЕ НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ)) КАК КолвоДнейВПериоде
				ИЗ
					Документ.ЛистУчета КАК ЛистУчета
				ГДЕ
					ЛистУчета.Проведен = ИСТИНА
					И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
				
				СГРУППИРОВАТЬ ПО
					НАЧАЛОПЕРИОДА(ЛистУчета.Дата, НЕДЕЛЯ),
					ЛистУчета.ТорговаяТочка,
					ЛистУчета.ГруппаТорговойТочки) КАК ВЗ_ПоНеделям
				ПО (НАЧАЛОПЕРИОДА(ВЗ_Запрос.Дата, НЕДЕЛЯ) = ВЗ_ПоНеделям.Неделя)
					И ВЗ_Запрос.ТорговаяТочка = ВЗ_ПоНеделям.ТорговаяТочка
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ДОБАВИТЬКДАТЕ(ВТПоказательПредыдущаяНеделя.Дата, ДЕНЬ, 7),
			ВТПоказательПредыдущаяНеделя.ТорговаяТочка,
			ВТПоказательПредыдущаяНеделя.ГруппаТорговойТочки,
			0,
			ВТПоказательПредыдущаяНеделя.СуммаПродажи,
			0,
			ВТПоказательПредыдущаяНеделя.РазвитыхТочек
		ИЗ
			ВТПоказательПредыдущаяНеделя КАК ВТПоказательПредыдущаяНеделя) КАК ВЗ_ПолныйЗапросБезСвертки
	
	СГРУППИРОВАТЬ ПО
		ВЗ_ПолныйЗапросБезСвертки.Дата,
		ВЗ_ПолныйЗапросБезСвертки.ТорговаяТочка,
		ВЗ_ПолныйЗапросБезСвертки.ГруппаТорговойТочки) КАК ВЗ_ПолныйЗапрос</query>
	</dataSet>
	<dataSet xsi:type="DataSetObject">
		<name>ДанныеПоУкомплектованностиПродавцов</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Торговая точка</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:required>true</dcscom:required>
			</role>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СтруктурныеЕдиницы</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГруппаТорговойТочки</dataPath>
			<field>ГруппаТорговойТочки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа торговой точки</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СтруктурныеЕдиницы</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Укомплектовано</dataPath>
			<field>Укомплектовано</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Укомплектованость</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>10</v8:Digits>
					<v8:FractionDigits>1</v8:FractionDigits>
					<v8:AllowedSign>Nonnegative</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НужноПродавцов</dataPath>
			<field>НужноПродавцов</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Укомплектованость (норма)</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>10</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Nonnegative</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВышлоПродавцов</dataPath>
			<field>ВышлоПродавцов</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вышло продавцов</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>10</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Nonnegative</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Переработка</dataPath>
			<field>Переработка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Укомплектованность (переработка)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>10</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Nonnegative</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Нехватка</dataPath>
			<field>Нехватка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Укомплектованность (нехватка)</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>10</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Nonnegative</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<objectName>ДанныеПоУкомплектованностиПродавцов</objectName>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>ПеремещенияТоваров</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
			<role>
				<dcscom:required>true</dcscom:required>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КолвоДокументовПеремещений</dataPath>
			<field>КолвоДокументовПеремещений</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КолвоДокументовПеремещенийРаньше8</dataPath>
			<field>КолвоДокументовПеремещенийРаньше8</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Со склада &lt; 8:00</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	НАЧАЛОПЕРИОДА(ПеремещениеТоваров.Дата, ДЕНЬ) КАК Дата,
	ПеремещениеТоваров.СтруктурнаяЕдиница КАК ТорговаяТочка,
	ВЫБОР
		КОГДА ПеремещениеТоваров.ВремяОтгрузки &lt;&gt; ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА 1
		ИНАЧЕ 0
	КОНЕЦ КАК КолвоДокументовПеремещений,
	ВЫБОР
		КОГДА ПеремещениеТоваров.ВремяОтгрузки &lt;= ДАТАВРЕМЯ(1, 1, 1, 8, 0, 0)
				И ПеремещениеТоваров.ВремяОтгрузки &gt; ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА 1
		ИНАЧЕ 0
	КОНЕЦ КАК КолвоДокументовПеремещенийРаньше8
ИЗ
	Документ.ПеремещениеТоваров КАК ПеремещениеТоваров
ГДЕ
	ПеремещениеТоваров.Проведен = ИСТИНА
	И ПеремещениеТоваров.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
	И ПеремещениеТоваров.ВидОперации = ЗНАЧЕНИЕ(Перечисление.ВидыПеремещений.Поступление)</query>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>РасчетСреднегоЧека</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СреднийЧек</dataPath>
			<field>СреднийЧек</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	НАЧАЛОПЕРИОДА(ЛистУчетаТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	ЛистУчетаТовары.Номенклатура,
	ЛистУчетаТовары.Ссылка.ТорговаяТочка,
	ЕСТЬNULL(ЦеныНоменклатуры.Цена, 0) КАК Цена
ПОМЕСТИТЬ ВТПрайсНоменклатуры
ИЗ
	Документ.ЛистУчета.Товары КАК ЛистУчетаТовары
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатуры
		ПО ЛистУчетаТовары.Ссылка.ТорговаяТочка = ЦеныНоменклатуры.ТорговаяТочка
			И ЛистУчетаТовары.Номенклатура = ЦеныНоменклатуры.Номенклатура
			И (ЦеныНоменклатуры.Период В
				(ВЫБРАТЬ ПЕРВЫЕ 1
					ЦеныНоменклатуры.Период
				ИЗ
					РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатуры
				ГДЕ
					ЦеныНоменклатуры.Период &lt;= ЛистУчетаТовары.Ссылка.Дата
					И ЦеныНоменклатуры.ТорговаяТочка = ЛистУчетаТовары.Ссылка.ТорговаяТочка
					И ЦеныНоменклатуры.Номенклатура = ЛистУчетаТовары.Номенклатура
				УПОРЯДОЧИТЬ ПО
					ЦеныНоменклатуры.Период УБЫВ))
ГДЕ
	ЛистУчетаТовары.Ссылка.Проведен = ИСТИНА
	И ЛистУчетаТовары.Ссылка.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	НАЧАЛОПЕРИОДА(ЛистУчетаТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	ЛистУчетаТовары.Номенклатура,
	СУММА(ЛистУчетаТовары.Сумма) КАК Сумма,
	ЛистУчетаТовары.Ссылка.ТорговаяТочка,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТПрайсНоменклатуры.Цена, 0) = 0
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК НоменклатураЕстьВПрайсеТорговойТочки
ПОМЕСТИТЬ ВТПродажиПоНоменклатуре
ИЗ
	Документ.ЛистУчета.Товары КАК ЛистУчетаТовары
		ЛЕВОЕ СОЕДИНЕНИЕ ВТПрайсНоменклатуры КАК ВТПрайсНоменклатуры
		ПО ЛистУчетаТовары.Ссылка.ТорговаяТочка = ВТПрайсНоменклатуры.ТорговаяТочка
			И ЛистУчетаТовары.Номенклатура = ВТПрайсНоменклатуры.Номенклатура
			И (НАЧАЛОПЕРИОДА(ЛистУчетаТовары.Ссылка.Дата, ДЕНЬ) = ВТПрайсНоменклатуры.Дата)
ГДЕ
	ЛистУчетаТовары.Ссылка.Проведен = ИСТИНА
	И ЛистУчетаТовары.Ссылка.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода

СГРУППИРОВАТЬ ПО
	ЛистУчетаТовары.Номенклатура,
	НАЧАЛОПЕРИОДА(ЛистУчетаТовары.Ссылка.Дата, ДЕНЬ),
	ЛистУчетаТовары.Ссылка.ТорговаяТочка,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВТПрайсНоменклатуры.Цена, 0) = 0
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ) КАК Дата,
	ЛистУчета.ТорговаяТочка,
	СУММА(ЛистУчета.КоличествоЧеков) КАК КоличествоЧеков
ПОМЕСТИТЬ ВТКоличествоЧеков
ИЗ
	Документ.ЛистУчета КАК ЛистУчета
ГДЕ
	ЛистУчета.Проведен = ИСТИНА
	И ЛистУчета.Дата МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода

СГРУППИРОВАТЬ ПО
	НАЧАЛОПЕРИОДА(ЛистУчета.Дата, ДЕНЬ),
	ЛистУчета.ТорговаяТочка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЗ_Запрос.Дата,
	ВЗ_Запрос.Номенклатура,
	ВЫБОР
		КОГДА ВЗ_Запрос.КоличествоЧеков = 0
			ТОГДА 0
		ИНАЧЕ ВЗ_Запрос.Сумма / ВЗ_Запрос.КоличествоЧеков
	КОНЕЦ КАК СреднийЧек
ИЗ
	(ВЫБРАТЬ
		ВТКоличествоЧеков.Дата КАК Дата,
		ВТПродажиПоНоменклатуре.Номенклатура КАК Номенклатура,
		СУММА(ВЫБОР
				КОГДА ВТПродажиПоНоменклатуре.НоменклатураЕстьВПрайсеТорговойТочки = ИСТИНА
					ТОГДА ЕСТЬNULL(ВТПродажиПоНоменклатуре.Сумма, 0)
				ИНАЧЕ 0
			КОНЕЦ) КАК Сумма,
		СУММА(ВЫБОР
				КОГДА ВТПродажиПоНоменклатуре.НоменклатураЕстьВПрайсеТорговойТочки = ИСТИНА
					ТОГДА ВТКоличествоЧеков.КоличествоЧеков
				ИНАЧЕ 0
			КОНЕЦ) КАК КоличествоЧеков
	ИЗ
		ВТКоличествоЧеков КАК ВТКоличествоЧеков
			ЛЕВОЕ СОЕДИНЕНИЕ ВТПродажиПоНоменклатуре КАК ВТПродажиПоНоменклатуре
			ПО ВТКоличествоЧеков.Дата = ВТПродажиПоНоменклатуре.Дата
				И ВТКоличествоЧеков.ТорговаяТочка = ВТПродажиПоНоменклатуре.ТорговаяТочка
	
	СГРУППИРОВАТЬ ПО
		ВТКоличествоЧеков.Дата,
		ВТПродажиПоНоменклатуре.Номенклатура) КАК ВЗ_Запрос</query>
	</dataSet>
	<dataSet xsi:type="DataSetObject">
		<name>ДанныеПродажСМСИзбенка</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Торговая точка</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СтруктурныеЕдиницы</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоПродажСМСИзбенка</dataPath>
			<field>КоличествоПродажСМСИзбенка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество продаж СМСИзбенка</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>3</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПродажСМСИзбенка</dataPath>
			<field>СуммаПродажСМСИзбенка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма продаж СМСИзбенка</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>2</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<objectName>ПродажиСМСИзбенка</objectName>
	</dataSet>
	<dataSet xsi:type="DataSetObject">
		<name>ДанныеПоПереработке</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Торговая точка</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:required>true</dcscom:required>
			</role>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СтруктурныеЕдиницы</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГруппаТорговойТочки</dataPath>
			<field>ГруппаТорговойТочки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа торговой точки</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СтруктурныеЕдиницы</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродавецПереработкаСсылка</dataPath>
			<field>ПродавецПереработкаСсылка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Продавец (переработка)</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.ФизическиеЛица</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПереработкаПродавец</dataPath>
			<field>ПереработкаПродавец</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Укомплектованность (переработка)</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>10</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Nonnegative</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=0</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<objectName>ТаблицаДанныхУкомплектованностиПереработка</objectName>
	</dataSet>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>Продавцы</destinationDataSet>
		<sourceExpression>Документ</sourceExpression>
		<destinationExpression>Документ</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчетаШапка</sourceDataSet>
		<destinationDataSet>Продавцы</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>МаржинальныеПоказатели</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>МаржинальныеПоказатели</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПродажИзУНФ</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПродажИзУНФ</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>Продавцы</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>Регистраторы</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>Регистраторы</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ПоказателиРазвитыхТочек</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ПоказателиРазвитыхТочек</destinationDataSet>
		<sourceExpression>ГруппаТорговойТочки</sourceExpression>
		<destinationExpression>ГруппаТорговойТочки</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ПоказателиРазвитыхТочек</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПоУкомплектованностиПродавцов</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПоУкомплектованностиПродавцов</destinationDataSet>
		<sourceExpression>ГруппаТорговойТочки</sourceExpression>
		<destinationExpression>ГруппаТорговойТочки</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПоУкомплектованностиПродавцов</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчетаШапка</sourceDataSet>
		<destinationDataSet>Регистраторы</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчетаШапка</sourceDataSet>
		<destinationDataSet>Регистраторы</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ЛистыУчетаШапка</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ЛистыУчетаШапка</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчетаШапка</sourceDataSet>
		<destinationDataSet>Продавцы</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ПеремещенияТоваров</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ПеремещенияТоваров</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>РасчетСреднегоЧека</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>РасчетСреднегоЧека</destinationDataSet>
		<sourceExpression>Номенклатура</sourceExpression>
		<destinationExpression>Номенклатура</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ЛистыУчетаШапка</destinationDataSet>
		<sourceExpression>ГруппаТорговойТочки</sourceExpression>
		<destinationExpression>ГруппаТорговойТочки</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПродажСМСИзбенка</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПродажСМСИзбенка</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПродажСМСИзбенка</destinationDataSet>
		<sourceExpression>Номенклатура</sourceExpression>
		<destinationExpression>Номенклатура</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПоПереработке</destinationDataSet>
		<sourceExpression>Дата</sourceExpression>
		<destinationExpression>Дата</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПоПереработке</destinationDataSet>
		<sourceExpression>ГруппаТорговойТочки</sourceExpression>
		<destinationExpression>ГруппаТорговойТочки</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПоПереработке</destinationDataSet>
		<sourceExpression>ТорговаяТочка</sourceExpression>
		<destinationExpression>ТорговаяТочка</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>ЛистыУчета</sourceDataSet>
		<destinationDataSet>ДанныеПродажИзУНФ</destinationDataSet>
		<sourceExpression>Номенклатура</sourceExpression>
		<destinationExpression>Номенклатура</destinationExpression>
	</dataSetLink>
	<calculatedField>
		<dataPath>ПроцентПродажПоКартам</dataPath>
		<expression>Выбор Когда СуммаПродажи = 0 Тогда 0 ИНАЧЕ СуммаБезСкидок / СуммаПродажи * 100 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>% продаж Карты</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>10</v8:Digits>
				<v8:FractionDigits>2</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ПроцентПродажПоКартамСАнкетами</dataPath>
		<expression>Выбор Когда СуммаПродажи = 0 Тогда 0 ИНАЧЕ СуммаБезСкидокКонтакт / СуммаПродажи * 100 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>% продаж Карты с анкетой</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>10</v8:Digits>
				<v8:FractionDigits>2</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ПроцентПродажПоКартамЗвонок</dataPath>
		<expression>Выбор Когда СуммаПродажи = 0 Тогда 0 ИНАЧЕ СуммаБезСкидокЗвонок / СуммаПродажи * 100 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>% продаж Карты/звонки 3П</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>10</v8:Digits>
				<v8:FractionDigits>2</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>Списание</dataPath>
		<expression>СуммаСписанияСрок + СуммаСписанияПоКачеству + СуммаДегустация + СуммаСписанияБой</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Списание</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>15</v8:Digits>
				<v8:FractionDigits>2</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>СписаниеВПроцентахКВыручке</dataPath>
		<expression>Выбор Когда СуммаПродажи = 0 Тогда 0 ИНАЧЕ (СуммаСписанияСрок + СуммаСписанияПоКачеству + СуммаДегустация + СуммаСписанияБой) / СуммаПродажи * 100 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Списание в % к выручке</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>15</v8:Digits>
				<v8:FractionDigits>1</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ПеребитоСМСИзбенка</dataPath>
		<expression>ВЫБОР КОГДА КоличествоПродажСМСИзбенка - КоличествоПродажи &gt; 0.1 ТОГДА ВЫБОР КОГДА СуммаПродажСМСИзбенка - ВЫБОР КОГДА СуммаПродажи &gt; 0 ТОГДА СуммаПродажи ИНАЧЕ 0 КОНЕЦ&gt; 0 ТОГДА СуммаПродажСМСИзбенка - ВЫБОР КОГДА СуммаПродажи &gt; 0 ТОГДА СуммаПродажи ИНАЧЕ 0 КОНЕЦ ИНАЧЕ 0 КОНЕЦ КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Перебитые чеки</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>15</v8:Digits>
				<v8:FractionDigits>2</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ТочностьПробитияСМСИзбенка</dataPath>
		<expression>ВЫБОР КОГДА СуммаПродажи = 0 ТОГДА 0 ИНАЧЕ (1 - ВЫБОР КОГДА КоличествоПродажСМСИзбенка - КоличествоПродажи &gt; 0.1 ТОГДА ВЫБОР КОГДА СуммаПродажСМСИзбенка - ВЫБОР КОГДА СуммаПродажи &gt; 0 ТОГДА СуммаПродажи ИНАЧЕ 0 КОНЕЦ &gt; 0 ТОГДА СуммаПродажСМСИзбенка - ВЫБОР КОГДА СуммаПродажи &gt; 0 ТОГДА СуммаПродажи ИНАЧЕ 0 КОНЕЦ ИНАЧЕ 0 КОНЕЦ КОНЕЦ)/СуммаПродажи * 100 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Точность пробития</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>10</v8:Digits>
				<v8:FractionDigits>1</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ДошлоДенег</dataPath>
		<expression>ВЫБОР КОГДА СуммаПродажи = 0 ТОГДА 0 ИНАЧЕ (1 - (НетУпаковкиСумма - РазницаПоЛУ)/СуммаПродажи) * 100 Конец</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дошло денег</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=1</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>10</v8:Digits>
				<v8:FractionDigits>1</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<totalField>
		<dataPath>СуммаПродажи</dataPath>
		<expression>Сумма(СуммаПродажи)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоПродажи</dataPath>
		<expression>Сумма(КоличествоПродажи)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоСписанияСрок</dataPath>
		<expression>Сумма(КоличествоСписанияСрок)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаСписанияСрок</dataPath>
		<expression>Сумма(СуммаСписанияСрок)</expression>
	</totalField>
	<totalField>
		<dataPath>СписаниеПоКачеству</dataPath>
		<expression>Сумма(СписаниеПоКачеству)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаСписанияПоКачеству</dataPath>
		<expression>Сумма(СуммаСписанияПоКачеству)</expression>
	</totalField>
	<totalField>
		<dataPath>Дегустация</dataPath>
		<expression>Сумма(Дегустация)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаДегустация</dataPath>
		<expression>Сумма(СуммаДегустация)</expression>
	</totalField>
	<totalField>
		<dataPath>РазницаПоЛУ</dataPath>
		<expression>Сумма(РазницаПоЛУ)</expression>
	</totalField>
	<totalField>
		<dataPath>ПрибыльРасчетная</dataPath>
		<expression>Сумма(ПрибыльРасчетная)</expression>
	</totalField>
	<totalField>
		<dataPath>Эффективность</dataPath>
		<expression>ВЫБОР КОГДА Сумма(СуммаПродажи) = 0 ТОГДА 0 ИНАЧЕ Сумма(ПрибыльРасчетная)/Сумма(СуммаПродажи) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаБезСкидок</dataPath>
		<expression>Сумма(СуммаБезСкидок)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаБезСкидокЗвонок</dataPath>
		<expression>Сумма(СуммаБезСкидокЗвонок)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаБезСкидокКонтакт</dataPath>
		<expression>Сумма(СуммаБезСкидокКонтакт)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаСписанияБой</dataPath>
		<expression>Сумма(СуммаСписанияБой)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоСписанияБой</dataPath>
		<expression>Сумма(КоличествоСписанияБой)</expression>
	</totalField>
	<totalField>
		<dataPath>БезНовыхТТ</dataPath>
		<expression>ВЫБОР КОГДА Сумма(СуммаОтносительныеПродажиПредыдущаяНеделя) = 0 ТОГДА 100 ИНАЧЕ СУММА(СуммаОтносительныеПродажи) / СУММА(СуммаОтносительныеПродажиПредыдущаяНеделя) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>РазвитыхТочек</dataPath>
		<expression>Сумма(РазвитыхТочек)</expression>
	</totalField>
	<totalField>
		<dataPath>РазвитыхТочекОтношение</dataPath>
		<expression>ВЫБОР КОГДА СУММА(РазвитыхТочекПредыдущая) = 0 ТОГДА 100 ИНАЧЕ Сумма(РазвитыхТочек) / СУММА(РазвитыхТочекПредыдущая) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>ВыручкаСОднойТочки</dataPath>
		<expression>ВЫБОР КОГДА СУММА(КолвоДнейСПродажами) = 0 ТОГДА 0 ИНАЧЕ Сумма(ВыручкаСОднойТочки) / СУММА(КолвоДнейСПродажами) КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>ВыручкаСОднойТочкиОтношение</dataPath>
		<expression>ВЫБОР КОГДА СУММА(ВыручкаСОднойТочкиПредыдущая) = 0 ТОГДА 100 ИНАЧЕ Сумма(ВыручкаСОднойТочки) / СУММА(ВыручкаСОднойТочкиПредыдущая) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>НаличиеНаТочке</dataPath>
		<expression>ВЫБОР КОГДА СУММА(СуммаПотерянныеПродажиПрочие) + СУММА(СуммаПродажи) = 0
			ТОГДА 0
		ИНАЧЕ 1 - СУММА(СуммаПотерянныеПродажиПрочие) / (СУММА(СуммаПотерянныеПродажиПрочие) + СУММА(СуммаПродажи))
	КОНЕЦ * 100</expression>
	</totalField>
	<totalField>
		<dataPath>НаличиеНаРЦ</dataPath>
		<expression>ВЫБОР КОГДА СУММА(СуммаПотерянныеПродажи) + СУММА(СуммаПродажи) = 0
			ТОГДА 0
		ИНАЧЕ 1 - СУММА(СуммаПотериНеВыполненЗаказ) / (СУММА(СуммаПотерянныеПродажи) + СУММА(СуммаПродажи))
	КОНЕЦ * 100</expression>
	</totalField>
	<totalField>
		<dataPath>Укомплектовано</dataPath>
		<expression>ВЫБОР КОГДА СУММА(НужноПродавцов) = 0 ТОГДА 100  ИНАЧЕ (1 - (СУММА(Переработка) + СУММА(Нехватка)) / СУММА(НужноПродавцов)) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>Нехватка</dataPath>
		<expression>Сумма(Нехватка)</expression>
	</totalField>
	<totalField>
		<dataPath>ВыручкаОтношение</dataPath>
		<expression>ВЫБОР КОГДА СУММА(СуммаПродажиПредыдущаяНеделя) = 0 ТОГДА 100 ИНАЧЕ Сумма(СуммаПродажи) / СУММА(СуммаПродажиПредыдущаяНеделя) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>ДоставкаРанее10ЧасовПроцент</dataPath>
		<expression>ВЫБОР КОГДА СУММА(КоличествоДокументов) = 0 ТОГДА 0 ИНАЧЕ Сумма(ДоставкаРанее10Часов) / СУММА(КоличествоДокументов) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоЧеков</dataPath>
		<expression>Сумма(КоличествоЧеков)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоЧековОтношение</dataPath>
		<expression>ВЫБОР КОГДА СУММА(КоличествоЧековПредНеделя) = 0 ТОГДА 100 ИНАЧЕ Сумма(КоличествоЧеков) / СУММА(КоличествоЧековПредНеделя) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>Свежесть</dataPath>
		<expression>ВЫБОР
		КОГДА СУММА(СуммаПродажСкоропортящийся) = 0
			ТОГДА 0
		ИНАЧЕ (СУММА(СуммаПродажСкоропортящийся - ВЫБОР
				КОГДА СуммаПродажСкоропортящийся &gt; НачОстатокСуммаСкоропортящийся
					ТОГДА НачОстатокСуммаСкоропортящийся
				ИНАЧЕ СуммаПродажСкоропортящийся
			КОНЕЦ)) / СУММА(СуммаПродажСкоропортящийся) * 100
	КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>КолвоДокументовПеремещенийРаньше8</dataPath>
		<expression>ВЫБОР КОГДА СУММА(КолвоДокументовПеремещений) = 0 ТОГДА 0 ИНАЧЕ СУММА(КолвоДокументовПеремещенийРаньше8)/СУММА(КолвоДокументовПеремещений) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>ТемператураХолодильникаВечером</dataPath>
		<expression>Максимум(ТемператураХолодильникаВечером)</expression>
	</totalField>
	<totalField>
		<dataPath>ТемператураХолодильникаУтром</dataPath>
		<expression>Максимум(ТемператураХолодильникаУтром)</expression>
	</totalField>
	<totalField>
		<dataPath>ПроцентПродажПоКартам</dataPath>
		<expression>Выбор Когда СУММА(СуммаПродажи) = 0 Тогда 0 ИНАЧЕ СУММА(СуммаБезСкидок) / СУММА(СуммаПродажи) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>ПроцентПродажПоКартамСАнкетами</dataPath>
		<expression>Выбор Когда СУММА(СуммаПродажи) = 0 Тогда 0 ИНАЧЕ СУММА(СуммаБезСкидокКонтакт) / СУММА(СуммаПродажи) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>ПроцентПродажПоКартамЗвонок</dataPath>
		<expression>Выбор Когда СУММА(СуммаПродажи) = 0 Тогда 0 ИНАЧЕ СУММА(СуммаБезСкидокЗвонок) / СУММА(СуммаПродажи) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаДефицит1</dataPath>
		<expression>Сумма(СуммаДефицит1)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаДефицит6</dataPath>
		<expression>Сумма(СуммаДефицит6)</expression>
	</totalField>
	<totalField>
		<dataPath>Наценка</dataPath>
		<expression>ВЫБОР
		КОГДА СУММА(СебестоимостьПродаж) = 0 ИЛИ СУММА(СуммаПродажи) = 0
			ТОГДА 0
		ИНАЧЕ (СУММА(СуммаПродажи) / СУММА(СебестоимостьПродаж)   - 1) * 100
	КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>СебестоимостьПродаж</dataPath>
		<expression>Сумма(СебестоимостьПродаж)</expression>
	</totalField>
	<totalField>
		<dataPath>Списание</dataPath>
		<expression>Сумма(Списание)</expression>
	</totalField>
	<totalField>
		<dataPath>СреднийЧек</dataPath>
		<expression>Сумма(СреднийЧек)</expression>
	</totalField>
	<totalField>
		<dataPath>ВремяДоставки</dataPath>
		<expression>ДобавитьКДате(ДатаВремя(1,1,1), "Секунда", ВЫБОР КОГДА СУММА(КоличествоДокументов) = 0 ТОГДА 0 ИНАЧЕ СУММА(ВремяДоставкиВСекундах) / СУММА(КоличествоДокументов) КОНЕЦ)</expression>
	</totalField>
	<totalField>
		<dataPath>СписаниеВПроцентахКВыручке</dataPath>
		<expression>Выбор Когда СУММА(СуммаПродажи) = 0 Тогда 0 ИНАЧЕ СУММА(СуммаСписанияСрок + СуммаСписанияПоКачеству + СуммаДегустация + СуммаСписанияБой) / СУММА(СуммаПродажи) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаПотерянныеПродажиПрочие</dataPath>
		<expression>Сумма(СуммаПотерянныеПродажиПрочие)</expression>
	</totalField>
	<totalField>
		<dataPath>КолвоДокументовПеремещений</dataPath>
		<expression>Сумма(КолвоДокументовПеремещений)</expression>
	</totalField>
	<totalField>
		<dataPath>ПеребитоСМСИзбенка</dataPath>
		<expression>Сумма(ПеребитоСМСИзбенка)</expression>
	</totalField>
	<totalField>
		<dataPath>ТочностьПробитияСМСИзбенка</dataPath>
		<expression>ВЫБОР КОГДА СУММА(СуммаПродажи) = 0 ТОГДА 0 ИНАЧЕ (1 - СУММА(ЕстьNULL(ПеребитоСМСИзбенка, 0))/СУММА(СуммаПродажи)) * 100 КОНЕЦ</expression>
	</totalField>
	<totalField>
		<dataPath>НетУпаковкиКоличество</dataPath>
		<expression>Сумма(НетУпаковкиКоличество)</expression>
	</totalField>
	<totalField>
		<dataPath>НетУпаковкиСумма</dataPath>
		<expression>Сумма(НетУпаковкиСумма)</expression>
	</totalField>
	<totalField>
		<dataPath>ДошлоДенег</dataPath>
		<expression>ВЫБОР КОГДА СУММА(СуммаПродажи )= 0 ТОГДА 0 ИНАЧЕ (1 - (СУММА(НетУпаковкиСумма) - СУММА(РазницаПоЛУ))/СУММА(СуммаПродажи)) * 100 Конец</expression>
	</totalField>
	<totalField>
		<dataPath>НужноПродавцов</dataPath>
		<expression>Сумма(НужноПродавцов)</expression>
	</totalField>
	<totalField>
		<dataPath>ПереработкаПродавец</dataPath>
		<expression>Сумма(ПереработкаПродавец)</expression>
	</totalField>
	<parameter>
		<name>ПериодОтчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период отчета</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ПериодОтчета.ДатаНачала</expression>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ПериодОтчета.ДатаОкончания</expression>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
	</parameter>
	<parameter>
		<name>ГруппаРазвития</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Группа развития</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.СтруктурныеЕдиницы</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ПричинаПотери</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Причина потери</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ПричиныПотерь</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ПричинаПотериНеВыполненЗаказ</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Причина потери не выполнен заказ</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ПричиныПотерь</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>НомерНедели</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ГруппаТорговойТочки</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоПродажи</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаПродажи</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоСписанияСрок</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаСписанияСрок</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СписаниеПоКачеству</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаСписанияПоКачеству</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Дегустация</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаДегустация</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ТорговаяТочка.Формат</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>fe1b6cca-34cc-4019-b914-b5ef502a5866</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Вид торговой точки</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ГруппаТорговойТочки</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>8b8d0737-9347-42e6-be72-70f9119cfd0b</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Группа торговой точки</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">УстановленПлакат</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
					<dcsset:userSettingID>e4f58d68-e26b-4730-967b-f3b94ac12737</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура.ТипАссортимента</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>066f6df7-169e-452a-b4e8-c76e7e8efb8c</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Тип ассортимента</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ПрограммаОбученияОтбор</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>f0229479-4083-4823-a061-e7b76b7d6064</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:userSettingID>21aab61f-2dac-402a-bd23-a8c5ab8a7fcc</dcsset:userSettingID>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ПериодОтчета</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
						<v8:startDate>0001-01-01T00:00:00</v8:startDate>
						<v8:endDate>0001-01-01T00:00:00</v8:endDate>
					</dcscor:value>
					<dcsset:userSettingID>fe46e8e8-51f1-49c0-8b1c-879afab41cd0</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Дата</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:userSettingID>8257e78f-2b49-43e4-995f-f82a56c52530</dcsset:userSettingID>
			</dcsset:order>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>НомерНедели</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ГруппаТорговойТочки</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:row>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>