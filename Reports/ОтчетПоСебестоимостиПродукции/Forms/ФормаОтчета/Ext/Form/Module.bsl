
&НаСервереБезКонтекста
Процедура УстановитьПараметрКомпоновки(мКомпоновщикНастроек, ИмяПараметра, ЗначениеПараметра)
	
	мПараметр = мКомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти(Новый ПараметрКомпоновкиДанных(ИмяПараметра));
	мПараметр.Значение 		= ЗначениеПараметра;
	мПараметр.Использование = Истина;
	
	//мПараметр = мКомпоновщикНастроек.ФиксированныеНастройки.ПараметрыДанных.Элементы.Найти(Новый ПараметрКомпоновкиДанных(ИмяПараметра));
	//мПараметр.Значение 		= ЗначениеПараметра;
	//мПараметр.Использование = Истина;
	
КонецПроцедуры

&НаСервереБезКонтекста
Процедура УстановитьОтборКомпоновки(мКомпоновщикНастроек, ИмяОтбора, ЗначениеОтбора)
	
	мПолеКомпоновки = Новый ПолеКомпоновкиДанных(ИмяОтбора);
	
	ЭлементыОтбора = мКомпоновщикНастроек.Настройки.Отбор.Элементы;
	Для Каждого ЭлементОтбора Из ЭлементыОтбора Цикл
		Если ЭлементОтбора.ЛевоеЗначение = мПолеКомпоновки Тогда
			Если ЗначениеЗаполнено(ЗначениеОтбора) Тогда
				ЭлементОтбора.ВидСравнения 		= ВидСравненияКомпоновкиДанных.Равно;
				ЭлементОтбора.ПравоеЗначение 	= ЗначениеОтбора;
				ЭлементОтбора.Использование 	= Истина;
			Иначе
				ЭлементОтбора.Использование 	= Ложь;
			КонецЕсли;
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура РедактироватьПериод(Команда)
 
	СтандартныйПериод = Новый СтандартныйПериод(Отчет.ДатаНачала, Отчет.ДатаОкончания);
	ДиалогРедактирования = Новый ДиалогРедактированияСтандартногоПериода();
	ДиалогРедактирования.Период = СтандартныйПериод;
	Если ДиалогРедактирования.Редактировать() Тогда
		СтандартныйПериод = ДиалогРедактирования.Период;
		Отчет.ДатаНачала  	= СтандартныйПериод.ДатаНачала;
		Отчет.ДатаОкончания = СтандартныйПериод.ДатаОкончания;
		УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ДатаНачала"	, Отчет.ДатаНачала);
		УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ДатаОкончания"	, Отчет.ДатаОкончания);
	КонецЕсли;
	 
КонецПроцедуры


&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Отчет.ДатаНачала 	= НачалоМесяца(ТекущаяДата());
	Отчет.ДатаОкончания = КонецМесяца(Отчет.ДатаНачала);
	Отчет.ТипТовара 	= ПредопределенноеЗначение("Перечисление.ТипыТоваров.Продукция");
	
	УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ДатаНачала"	, Отчет.ДатаНачала);
	УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ДатаОкончания"	, Отчет.ДатаОкончания);
	УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ТипТовара"		, Отчет.ТипТовара);
	
КонецПроцедуры


&НаКлиенте
Процедура ДатаНачалаПриИзменении(Элемент)
	
	УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ДатаНачала"	, Отчет.ДатаНачала);
	
КонецПроцедуры

&НаКлиенте
Процедура ДатаОкончанияПриИзменении(Элемент)
	
	УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ДатаОкончания"	, Отчет.ДатаОкончания);
	
КонецПроцедуры

&НаКлиенте
Процедура ТипТовараПриИзменении(Элемент)
	
	УстановитьПараметрКомпоновки(Отчет.КомпоновщикНастроек, "ТипТовара"		, Отчет.ТипТовара);
	
КонецПроцедуры
